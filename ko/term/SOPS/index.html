<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOPS | KAITRUST AI λ°±κ³Όμ‚¬μ „</title>
    <meta name="description" content="SOPS(Secrets OPerationS)λ” Mozillaκ°€ κ°λ°ν• μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬λ΅, YAML/JSON/ENV νμΌμ κ°’μ„ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•μ—¬ GitOps ν™κ²½μ—μ„ μ•μ „ν• μ‹ν¬λ¦Ώ κ΄€λ¦¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤.">
    <meta name="keywords" content="SOPS, Secrets OPerationS, Mozilla, μ‹ν¬λ¦Ώ μ•”νΈν™”, GitOps, KMS, age, PGP, KAITRUST, AI λ°±κ³Όμ‚¬μ „, λ³΄μ•">
    <link rel="canonical" href="https://glossary.kaitrust.ai/ko/term/SOPS/">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://glossary.kaitrust.ai/ko/term/SOPS/">
    <meta property="og:title" content="SOPS | KAITRUST AI λ°±κ³Όμ‚¬μ „">
    <meta property="og:description" content="SOPS(Secrets OPerationS)λ” Mozillaκ°€ κ°λ°ν• μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬λ΅, YAML/JSON/ENV νμΌμ κ°’μ„ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•μ—¬ GitOps ν™κ²½μ—μ„ μ•μ „ν• μ‹ν¬λ¦Ώ κ΄€λ¦¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤.">
    <meta property="og:image" content="https://kaitrust.ai/images/og-glossary.png">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="KAITRUST AI λ°±κ³Όμ‚¬μ „">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="SOPS | KAITRUST AI λ°±κ³Όμ‚¬μ „">
    <meta name="twitter:description" content="SOPS(Secrets OPerationS)λ” Mozillaκ°€ κ°λ°ν• μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬λ΅, YAML/JSON/ENV νμΌμ κ°’μ„ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•μ—¬ GitOps ν™κ²½μ—μ„ μ•μ „ν• μ‹ν¬λ¦Ώ κ΄€λ¦¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤.">
    <meta name="twitter:image" content="https://kaitrust.ai/images/og-glossary.png">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "DefinedTerm",
        "name": "SOPS",
        "description": "SOPS(Secrets OPerationS)λ” Mozillaκ°€ κ°λ°ν• μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬λ΅, YAML/JSON/ENV νμΌμ κ°’μ„ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•μ—¬ GitOps ν™κ²½μ—μ„ μ•μ „ν• μ‹ν¬λ¦Ώ κ΄€λ¦¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤.",
        "inDefinedTermSet": {
            "@type": "DefinedTermSet",
            "name": "KAITRUST AI λ°±κ³Όμ‚¬μ „",
            "url": "https://glossary.kaitrust.ai/"
        }
    }
    </script>

    <link rel="icon" type="image/png" href="https://kaitrust.ai/favicon.png">
    <link rel="apple-touch-icon" href="https://kaitrust.ai/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Common CSS -->
    <link rel="stylesheet" href="/css/kaitrust-common.css">
    <link rel="stylesheet" href="/css/light-mode.css">
    <link rel="stylesheet" href="/components/ask-ai/kaitrust-ai-modal.css">
    <link rel="stylesheet" href="/glossary/css/term-sections.css">

    <style>
        .term-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 120px 2rem 4rem;
            position: relative;
            z-index: 1;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: #64748b;
            text-decoration: none;
            transition: color 0.2s;
        }
        .breadcrumb a:hover { color: var(--primary); }
        .breadcrumb span { color: #64748b; }
        .breadcrumb .current { color: var(--accent); font-weight: 500; }
        .term-detail-header {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        .term-category-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #a855f7;
            margin-bottom: 1rem;
        }
        .term-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .term-english {
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 1.5rem;
        }
        .term-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #e2e8f0;
        }
        .term-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .term-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #a855f7, #6366f1);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .related-section {
            margin-top: 3rem;
        }
        .related-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #f1f5f9;
        }
        @media (max-width: 768px) {
            .term-detail-container { padding: 100px 1rem 2rem; }
            .term-detail-header { padding: 2rem 1.5rem; }
            .term-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div class="particle-container" id="particles"></div>

    <!-- Header -->
        <div id="kaitrust-header"></div>

    <main class="term-detail-container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="https://kaitrust.ai">ν™</a>
            <span>β€Ί</span>
            <a href="https://glossary.kaitrust.ai">AI λ°±κ³Όμ‚¬μ „</a>
            <span>β€Ί</span>
            <a href="https://glossary.kaitrust.ai/#security">λ³΄μ•</a>
            <span>β€Ί</span>
            <span class="current">SOPS</span>
        </nav>

        <!-- Term Header -->
        <article class="term-detail-header">
            <div class="term-category-badge">
                <span>π”’</span>
                <span>λ³΄μ•</span>
            </div>
            <h1 class="term-title">SOPS</h1>
            <div class="term-english">Secrets OPerationS</div>

            <div class="term-description">
                <p>μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬ - YAML/JSON κ°’μ„ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•μ—¬ Gitμ— μ•μ „ν•κ² μ €μ¥ν•λ” Mozilla μ¤ν”μ†μ¤</p>
            </div>
            <div class="term-actions">
                <a href="https://glossary.kaitrust.ai" class="term-action-btn btn-primary">
                    π“ μ „μ²΄ μ©μ–΄ λ³΄κΈ°
                </a>
                <a href="https://glossary.kaitrust.ai/#security" class="term-action-btn btn-secondary">
                    π”’ λ³΄μ• λ”λ³΄κΈ°
                </a>
            </div>
        </article>

        <!-- μƒμ„Έ μ„¤λ… μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">π“– μƒμ„Έ μ„¤λ…</h2>
            <div class="section-content">
                <p>SOPS(Secrets OPerationS)λ” Mozillaμ—μ„ κ°λ°ν• μ•”νΈν™”λ νμΌ νΈμ§‘ λ„κµ¬μ…λ‹λ‹¤. YAML, JSON, ENV, INI νμΌμ—μ„ ν‚¤(key)λ” ν‰λ¬ΈμΌλ΅ μ μ§€ν•κ³  κ°’(value)λ§ μ„ νƒμ μΌλ΅ μ•”νΈν™”ν•λ” κ²ƒμ΄ νΉμ§•μ…λ‹λ‹¤. μ΄ λ•λ¶„μ— μ•”νΈν™”λ νμΌλ„ κµ¬μ΅°λ¥Ό νμ•…ν•  μ μμ–΄ μ½”λ“ λ¦¬λ·°, diff, λ³‘ν•© μ¶©λ ν•΄κ²°μ΄ κ°€λ¥ν•©λ‹λ‹¤.</p>

                <p>SOPSλ” λ‹¤μ–‘ν• ν‚¤ κ΄€λ¦¬ μ‹μ¤ν…(KMS)μ„ μ§€μ›ν•©λ‹λ‹¤. AWS KMS, Google Cloud KMS, Azure Key Vault κ°™μ€ ν΄λΌμ°λ“ KMSμ™€ HashiCorp Vault, age, PGPλ¥Ό λ¨λ‘ μ§€μ›ν•λ©°, μ—¬λ¬ ν‚¤λ¥Ό λ™μ‹μ— μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ κ°λ°ν€μ€ age ν‚¤λ΅, ν”„λ΅λ•μ… CI/CDλ” AWS KMSλ΅ λ³µνΈν™”ν•λ„λ΅ μ„¤μ •ν•  μ μμµλ‹λ‹¤. μ—¬λ¬ ν‚¤ μ¤‘ ν•λ‚λ§ μμΌλ©΄ λ³µνΈν™”λλ―€λ΅ ν‚¤ λ΅ν…μ΄μ…μ΄λ‚ ν€μ› λ³€κ²½ μ‹μ—λ„ μ μ—°ν•©λ‹λ‹¤.</p>

                <p>SOPSμ ν° μ¥μ μ€ μ—λ””ν„° ν†µν•©μ…λ‹λ‹¤. `sops secrets.yaml` λ…λ Ήμ–΄λ΅ νμΌμ„ μ—΄λ©΄ μλ™μΌλ΅ λ³µνΈν™”λ μƒνƒλ΅ νΈμ§‘κΈ°κ°€ μ—΄λ¦¬κ³ , μ €μ¥ ν›„ λ‹«μΌλ©΄ λ‹¤μ‹ μ•”νΈν™”λ©λ‹λ‹¤. λ”°λΌμ„ μΌλ° νμΌ νΈμ§‘κ³Ό λ™μΌν• μ›ν¬ν”λ΅μ°λ΅ μ‹ν¬λ¦Ώμ„ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤. Vim, VS Code ν”λ¬κ·ΈμΈλ„ μμ–΄ IDEμ—μ„ μ§μ ‘ νΈμ§‘ν•  μ μμµλ‹λ‹¤.</p>

                <p>GitOps ν™κ²½μ—μ„ SOPSλ” Flux, ArgoCDμ™€ λ„¤μ΄ν‹°λΈλ΅ ν†µν•©λ©λ‹λ‹¤. Fluxμ kustomize-controllerλ” SOPS μ•”νΈν™”λ μ‹ν¬λ¦Ώ νμΌμ„ μλ™μΌλ΅ λ³µνΈν™”ν•μ—¬ ν΄λ¬μ¤ν„°μ— μ μ©ν•©λ‹λ‹¤. ArgoCDλ„ SOPS ν”λ¬κ·ΈμΈμ„ ν†µν•΄ μ•”νΈν™”λ λ§¤λ‹νμ¤νΈλ¥Ό μ²λ¦¬ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Kubernetes μ‹ν¬λ¦Ώμ„ ν¬ν•¨ν• μ „μ²΄ μΈν”„λΌλ¥Ό GitμΌλ΅ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.</p>
            </div>
        </section>

        <!-- μ½”λ“ μμ  μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">π’» μ½”λ“ μμ </h2>
            <div class="section-content">
                <h3>SOPS μ„¤μΉ λ° μ΄κΈ° μ„¤μ •</h3>
                <pre><code class="language-bash"># macOS μ„¤μΉ
brew install sops

# Linux μ„¤μΉ
wget https://github.com/getsops/sops/releases/download/v3.8.1/sops-v3.8.1.linux.amd64
chmod +x sops-v3.8.1.linux.amd64
sudo mv sops-v3.8.1.linux.amd64 /usr/local/bin/sops

# age ν‚¤ μƒμ„± (κ°„λ‹¨ν• λ΅μ»¬ μ•”νΈν™”μ©)
# age μ„¤μΉ: brew install age
age-keygen -o ~/.sops/age/keys.txt
# μ¶λ ¥ μ: AGE-SECRET-KEY-1QFSMEH... (μ΄κ²ƒμ΄ λΉ„κ³µκ°ν‚¤)
# κ³µκ°ν‚¤: age1... (μ΄κ²ƒμΌλ΅ μ•”νΈν™”)

# AWS KMS ν‚¤ μ‚¬μ© μ‹ IAM κ¶ν• ν•„μ”
# aws kms create-key --description "SOPS encryption key"</code></pre>

                <h3>.sops.yaml μ„¤μ • νμΌ (ν”„λ΅μ νΈ λ£¨νΈ)</h3>
                <pre><code class="language-yaml"># .sops.yaml - ν”„λ΅μ νΈ λ£¨νΈμ— μ„μΉ
# κ²½λ΅ ν¨ν„΄λ³„λ΅ λ‹¤λ¥Έ μ•”νΈν™” ν‚¤ μ μ©

creation_rules:
  # κ°λ° ν™κ²½ - age ν‚¤ μ‚¬μ©
  - path_regex: secrets/development/.*\.yaml$
    age: >-
      age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p

  # μ¤ν…μ΄μ§• ν™κ²½ - AWS KMS μ‚¬μ©
  - path_regex: secrets/staging/.*\.yaml$
    kms: arn:aws:kms:ap-northeast-2:123456789:key/abc-def-123

  # ν”„λ΅λ•μ… ν™κ²½ - AWS KMS + age (λ‘ μ¤‘ ν•λ‚λ΅ λ³µνΈν™” κ°€λ¥)
  - path_regex: secrets/production/.*\.yaml$
    kms: arn:aws:kms:ap-northeast-2:123456789:key/prod-key-456
    age: >-
      age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p

  # Kubernetes μ‹ν¬λ¦Ώ - νΉμ • ν‚¤λ§ μ•”νΈν™”
  - path_regex: k8s/.*secrets?\.yaml$
    kms: arn:aws:kms:ap-northeast-2:123456789:key/k8s-secrets-key
    encrypted_regex: ^(data|stringData)$

  # Terraform λ³€μ - .tfvars νμΌ
  - path_regex: terraform/.*\.tfvars$
    age: >-
      age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p</code></pre>

                <h3>νμΌ μ•”νΈν™” λ° λ³µνΈν™”</h3>
                <pre><code class="language-bash"># μƒ νμΌ μ•”νΈν™” (μƒμ„±κ³Ό λ™μ‹μ—)
# .sops.yamlμ creation_rulesκ°€ μλ™ μ μ©λ¨
sops secrets/production/database.yaml
# νΈμ§‘κΈ°κ°€ μ—΄λ¦¬κ³ , μ €μ¥ ν›„ λ‹«μΌλ©΄ μ•”νΈν™”λ¨

# κΈ°μ΅΄ ν‰λ¬Έ νμΌμ„ μ•”νΈν™”
sops -e secrets.yaml > secrets.enc.yaml

# μ•”νΈν™”λ νμΌμ„ ν‰λ¬ΈμΌλ΅ λ³µνΈν™” (stdoutμΌλ΅ μ¶λ ¥)
sops -d secrets.enc.yaml

# μ•”νΈν™”λ νμΌμ„ μ μλ¦¬μ—μ„ λ³µνΈν™” (νμΌ λ®μ–΄μ“°κΈ°)
sops -d -i secrets.enc.yaml

# νΉμ • ν‚¤λ΅ λ…μ‹μ  μ•”νΈν™”
sops --age age1ql3z7hjy54pw3... -e secrets.yaml > secrets.enc.yaml

# AWS KMSλ΅ μ•”νΈν™”
sops --kms arn:aws:kms:ap-northeast-2:123456789:key/my-key -e secrets.yaml

# νΈμ§‘ λ¨λ“λ΅ μ—΄κΈ° (λ³µνΈν™” β†’ νΈμ§‘ β†’ μ¬μ•”νΈν™”)
sops secrets.enc.yaml

# νΉμ • κ°’λ§ μ¶”μ¶ (jqμ²λΌ)
sops -d --extract '["database"]["password"]' secrets.enc.yaml</code></pre>

                <h3>μ•”νΈν™”λ νμΌ μμ‹</h3>
                <pre><code class="language-yaml"># secrets/production/database.yaml (μ•”νΈν™” ν›„)
# ν‚¤λ” ν‰λ¬Έ, κ°’λ§ μ•”νΈν™”λ¨
database:
    host: ENC[AES256_GCM,data:Mj3p...,iv:...,tag:...,type:str]
    port: ENC[AES256_GCM,data:NjQ=,iv:...,tag:...,type:int]
    username: ENC[AES256_GCM,data:YWRt...,iv:...,tag:...,type:str]
    password: ENC[AES256_GCM,data:c3Vw...,iv:...,tag:...,type:str]

redis:
    host: ENC[AES256_GCM,data:cmVk...,iv:...,tag:...,type:str]
    password: ENC[AES256_GCM,data:cmVk...,iv:...,tag:...,type:str]

sops:
    kms:
        - arn: arn:aws:kms:ap-northeast-2:123456789:key/prod-key-456
          created_at: "2024-01-15T10:30:00Z"
          enc: AQICAHj...
    age:
        - recipient: age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24...
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2024-01-15T10:30:00Z"
    mac: ENC[AES256_GCM,data:...,tag:...,type:str]
    version: 3.8.1</code></pre>

                <h3>Flux GitOps ν†µν•©</h3>
                <pre><code class="language-yaml"># flux-system/gotk-sync.yaml
apiVersion: kustomize.toolkit.fluxcd.io/v1
kind: Kustomization
metadata:
  name: infrastructure
  namespace: flux-system
spec:
  interval: 10m
  path: ./infrastructure
  prune: true
  sourceRef:
    kind: GitRepository
    name: flux-system
  # SOPS λ³µνΈν™” ν™μ„±ν™”
  decryption:
    provider: sops
    secretRef:
      name: sops-age  # age λΉ„κ³µκ°ν‚¤λ¥Ό λ‹΄μ€ Secret

---
# SOPS age ν‚¤λ¥Ό Kubernetes SecretμΌλ΅ μ €μ¥
# kubectl create secret generic sops-age \
#   --namespace=flux-system \
#   --from-file=age.agekey=~/.sops/age/keys.txt

apiVersion: v1
kind: Secret
metadata:
  name: sops-age
  namespace: flux-system
type: Opaque
data:
  age.agekey: QUdFLVNFQ1JFVC1LRVkt...  # base64 encoded age key</code></pre>

                <h3>Pythonμ—μ„ SOPS νμΌ μ½κΈ°</h3>
                <pre><code class="language-python">import subprocess
import yaml
import json
from pathlib import Path
from typing import Any, Optional
import os

class SOPSClient:
    """SOPS μ•”νΈν™”λ νμΌμ„ λ‹¤λ£¨λ” Python ν΄λΌμ΄μ–ΈνΈ"""

    def __init__(self, age_key_file: Optional[str] = None):
        """
        Args:
            age_key_file: age λΉ„κ³µκ°ν‚¤ νμΌ κ²½λ΅ (ν™κ²½λ³€μ SOPS_AGE_KEY_FILEλ΅λ„ μ„¤μ • κ°€λ¥)
        """
        if age_key_file:
            os.environ['SOPS_AGE_KEY_FILE'] = age_key_file

    def decrypt_file(self, file_path: str) -> dict:
        """SOPS νμΌμ„ λ³µνΈν™”ν•μ—¬ dictλ΅ λ°ν™"""
        result = subprocess.run(
            ['sops', '-d', file_path],
            capture_output=True,
            text=True
        )

        if result.returncode != 0:
            raise RuntimeError(f"SOPS decryption failed: {result.stderr}")

        file_ext = Path(file_path).suffix.lower()
        if file_ext in ['.yaml', '.yml']:
            return yaml.safe_load(result.stdout)
        elif file_ext == '.json':
            return json.loads(result.stdout)
        else:
            return {'content': result.stdout}

    def encrypt_data(self, data: dict, output_path: str,
                     file_type: str = 'yaml') -> None:
        """dictλ¥Ό SOPSλ΅ μ•”νΈν™”ν•μ—¬ νμΌλ΅ μ €μ¥"""
        if file_type == 'yaml':
            content = yaml.dump(data, default_flow_style=False)
            input_type = '--input-type=yaml'
            output_type = '--output-type=yaml'
        else:
            content = json.dumps(data, indent=2)
            input_type = '--input-type=json'
            output_type = '--output-type=json'

        result = subprocess.run(
            ['sops', '-e', input_type, output_type, '/dev/stdin'],
            input=content,
            capture_output=True,
            text=True
        )

        if result.returncode != 0:
            raise RuntimeError(f"SOPS encryption failed: {result.stderr}")

        Path(output_path).write_text(result.stdout)

    def get_value(self, file_path: str, key_path: str) -> Any:
        """μ•”νΈν™”λ νμΌμ—μ„ νΉμ • κ°’ μ¶”μ¶"""
        # key_path μ: "database.password" λλ” '["database"]["password"]'
        json_path = ''.join(f'["{k}"]' for k in key_path.split('.'))

        result = subprocess.run(
            ['sops', '-d', '--extract', json_path, file_path],
            capture_output=True,
            text=True
        )

        if result.returncode != 0:
            raise RuntimeError(f"SOPS extraction failed: {result.stderr}")

        return result.stdout.strip()

    def update_value(self, file_path: str, key_path: str, value: Any) -> None:
        """μ•”νΈν™”λ νμΌμ νΉμ • κ°’ μ—…λ°μ΄νΈ"""
        # λ³µνΈν™”
        data = self.decrypt_file(file_path)

        # μ¤‘μ²©λ ν‚¤ μ—…λ°μ΄νΈ
        keys = key_path.split('.')
        current = data
        for key in keys[:-1]:
            current = current[key]
        current[keys[-1]] = value

        # μ¬μ•”νΈν™”
        file_ext = Path(file_path).suffix.lower()
        file_type = 'yaml' if file_ext in ['.yaml', '.yml'] else 'json'
        self.encrypt_data(data, file_path, file_type)


# μ‚¬μ© μμ‹
if __name__ == "__main__":
    # age ν‚¤ νμΌ μ§€μ •
    sops = SOPSClient(age_key_file=os.path.expanduser("~/.sops/age/keys.txt"))

    # μ „μ²΄ νμΌ λ³µνΈν™”
    secrets = sops.decrypt_file("secrets/production/database.yaml")
    print(f"DB Host: {secrets['database']['host']}")
    print(f"DB User: {secrets['database']['username']}")

    # νΉμ • κ°’λ§ μ¶”μ¶
    db_password = sops.get_value(
        "secrets/production/database.yaml",
        "database.password"
    )
    print(f"DB Password: {db_password}")

    # κ°’ μ—…λ°μ΄νΈ
    sops.update_value(
        "secrets/production/database.yaml",
        "database.password",
        "new_secure_password_123"
    )</code></pre>
            </div>
        </section>

        <!-- μ‹¤λ¬΄ ν‘ν„ μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">π—£οΈ μ‹¤λ¬΄μ—μ„ μ΄λ ‡κ² λ§ν•΄μ”</h2>
            <div class="usage-tabs">
                <button class="usage-tab active" data-tab="meeting">νμ</button>
                <button class="usage-tab" data-tab="interview">λ©΄μ ‘</button>
                <button class="usage-tab" data-tab="review">μ½”λ“λ¦¬λ·°</button>
            </div>
            <div class="usage-content active" id="meeting">
                <ul>
                    <li>"SOPSλ΅ μ‹ν¬λ¦Ώ μ•”νΈν™”ν•λ©΄ ν‚¤ μ΄λ¦„μ€ λ³΄μ΄λ‹κΉ PRμ—μ„ μ–΄λ–¤ κ°’μ΄ λ³€κ²½λλ”μ§€ μ½”λ“ λ¦¬λ·°ν•  μ μμ–΄μ”."</li>
                    <li>"κ°λ° ν™κ²½μ€ age ν‚¤λ΅, ν”„λ΅λ•μ…μ€ AWS KMSλ΅ μ•”νΈν™”ν•΄μ„ κ¶ν• λ¶„λ¦¬ν•  μ μμ–΄μ”."</li>
                    <li>"Fluxκ°€ SOPS λ„¤μ΄ν‹°λΈ μ§€μ›ν•λ‹κΉ, μ‹ν¬λ¦Ώ λ§¤λ‹νμ¤νΈλ„ Gitμ— μ»¤λ°‹ν•κ³  GitOpsλ΅ κ΄€λ¦¬ κ°€λ¥ν•΄μ”."</li>
                    <li>".sops.yamlμ— κ²½λ΅λ³„ κ·μΉ™ μ •ν•΄λ‘λ©΄ ν€μ›λ“¤μ΄ νμΌ λ§λ“¤ λ• μλ™μΌλ΅ λ§λ” ν‚¤λ΅ μ•”νΈν™”λ©λ‹λ‹¤."</li>
                </ul>
            </div>
            <div class="usage-content" id="interview">
                <ul>
                    <li>"SOPSκ°€ μ „μ²΄ νμΌ μ•”νΈν™”κ°€ μ•„λ‹ κ°’λ§ μ•”νΈν™”ν•λ” λ°©μ‹μ μ¥λ‹¨μ μ€ λ¬΄μ—‡μΈκ°€μ”?"</li>
                    <li>"SOPSμ™€ Sealed Secretsλ¥Ό λΉ„κµν•κ³ , κ°κ° μ–΄λ–¤ μƒν™©μ— μ ν•©ν•μ§€ μ„¤λ…ν•΄μ£Όμ„Έμ”."</li>
                    <li>"SOPSμ ν‚¤ λ΅ν…μ΄μ…μ€ μ–΄λ–»κ² μ²λ¦¬ν•μ‹κ² μµλ‹κΉ? μ—¬λ¬ ν‚¤λ¥Ό λ™μ‹μ— μ‚¬μ©ν•λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?"</li>
                    <li>"SOPSλ¥Ό CI/CD νμ΄ν”„λΌμΈμ— ν†µν•©ν•  λ• κ¶ν• κ΄€λ¦¬λ” μ–΄λ–»κ² ν•μ‹κ² μµλ‹κΉ?"</li>
                </ul>
            </div>
            <div class="usage-content" id="review">
                <ul>
                    <li>"μ΄ μ‹ν¬λ¦Ώ νμΌ .sops.yaml κ·μΉ™ λ²”μ„ λ°–μ΄λΌ ν‰λ¬ΈμΌλ΅ μ»¤λ°‹λμ–΄μ”. κ²½λ΅ ν™•μΈν•΄μ£Όμ„Έμ”."</li>
                    <li>"SOPS λ©”νƒ€λ°μ΄ν„° μ„Ήμ…μ— age ν‚¤κ°€ μ—†λ„¤μ”. κ°λ°μλ“¤μ΄ λ΅μ»¬μ—μ„ λ³µνΈν™” λ» ν•©λ‹λ‹¤."</li>
                    <li>"encrypted_regexλ΅ data ν‚¤λ§ μ•”νΈν™”ν•λ„λ΅ ν–λ”λ°, stringDataλ„ μ¶”κ°€ν•΄μ•Ό ν•΄μ”."</li>
                    <li>"μ΄ λ―Όκ° μ„¤μ •μ€ ν™κ²½λ³€μλ³΄λ‹¤ SOPS νμΌλ΅ κ΄€λ¦¬ν•λ” κ² λ³€κ²½ μ΄λ ¥ μ¶”μ μ— μΆ‹μ•„μ”."</li>
                </ul>
            </div>
        </section>

        <!-- μ£Όμμ‚¬ν•­ μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">β οΈ μ£Όμμ‚¬ν•­</h2>
            <div class="warning-content">
                <ul>
                    <li><strong>.sops.yaml κ·μΉ™ λ„λ½ μ£Όμ:</strong> .sops.yamlμ path_regexκ°€ νμΌ κ²½λ΅μ™€ λ§μ§€ μ•μΌλ©΄ μ•”νΈν™” μ—†μ΄ ν‰λ¬ΈμΌλ΅ μ €μ¥λ©λ‹λ‹¤. μƒ λ””λ ‰ν† λ¦¬λ‚ νμΌ ν¨ν„΄μ„ μ¶”κ°€ν•  λ• λ°λ“μ‹ .sops.yamlλ„ μ—…λ°μ΄νΈν•κ³ , pre-commit hookμΌλ΅ ν‰λ¬Έ μ‹ν¬λ¦Ώ μ»¤λ°‹μ„ μ°¨λ‹¨ν•μ„Έμ”.</li>
                    <li><strong>ν‚¤ λ°±μ—… λ° λ³µκµ¬ κ³„ν:</strong> ageλ‚ PGP λΉ„κ³µκ°ν‚¤λ¥Ό λ¶„μ‹¤ν•λ©΄ ν•΄λ‹Ή ν‚¤λ΅λ§ μ•”νΈν™”λ νμΌμ€ μκµ¬μ μΌλ΅ λ³µνΈν™”ν•  μ μ—†μµλ‹λ‹¤. ν΄λΌμ°λ“ KMSλ¥Ό μ£Ό ν‚¤λ΅ μ‚¬μ©ν•κ³ , age ν‚¤λ” λ³΄μ΅°λ΅ μ„¤μ •ν•μ„Έμ”. ν‚¤ λ°±μ—…μ€ λ³„λ„μ μ•μ „ν• μ €μ¥μ†μ— λ³΄κ΄€ν•΄μ•Ό ν•©λ‹λ‹¤.</li>
                    <li><strong>Git νμ¤ν† λ¦¬μ ν‰λ¬Έ μ£Όμ:</strong> μ‹¤μλ΅ ν‰λ¬ΈμΌλ΅ μ»¤λ°‹ν• ν›„ μ•”νΈν™”ν•΄λ„ Git νμ¤ν† λ¦¬μ—λ” ν‰λ¬Έμ΄ λ‚¨μ•„μμµλ‹λ‹¤. μ΄λ° κ²½μ° git filter-branchλ‚ BFG Repo-Cleanerλ΅ νμ¤ν† λ¦¬λ¥Ό μ •λ¦¬ν•κ³ , λ…Έμ¶λ μ‹ν¬λ¦Ώμ€ μ¦‰μ‹ κµμ²΄ν•΄μ•Ό ν•©λ‹λ‹¤.</li>
                </ul>
            </div>
        </section>

        <!-- κ΄€λ ¨ μ©μ–΄ μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">π”— κ΄€λ ¨ μ©μ–΄</h2>
            <div class="related-terms">
                <a href="/ko/term/Sealed%20Secrets/" class="related-term-link">Sealed Secrets</a>
                <a href="/ko/term/HashiCorp%20Vault/" class="related-term-link">HashiCorp Vault</a>
                <a href="/ko/term/GitOps/" class="related-term-link">GitOps</a>
                <a href="/ko/term/Flux/" class="related-term-link">Flux</a>
                <a href="/ko/term/AWS%20KMS/" class="related-term-link">AWS KMS</a>
            </div>
        </section>

        <!-- λ” λ°°μ°κΈ° μ„Ήμ… -->
        <section class="term-section">
            <h2 class="section-title">π“ λ” λ°°μ°κΈ°</h2>
            <div class="learn-more">
                <ul>
                    <li><a href="https://github.com/getsops/sops" target="_blank" rel="noopener">SOPS GitHub - κ³µμ‹ λ¬Έμ„ λ° μ†μ¤μ½”λ“</a></li>
                    <li><a href="https://fluxcd.io/flux/guides/mozilla-sops/" target="_blank" rel="noopener">Flux SOPS κ°€μ΄λ“ - GitOps ν†µν•© μ„¤μ •</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SOPS" target="_blank" rel="noopener">Mozilla SOPS λ¬Έμ„ - μ„¤κ³„ μ² ν•™ λ° μ‚¬μ©λ²•</a></li>
                </ul>
            </div>
        </section>
    </main>

    <!-- Engagement Kit -->
    <div id="kaitrust-engagement-kit"></div>
    <link rel="stylesheet" href="/components/engagement-kit/engagement-kit.css?v=20260130015843">
    <script src="/components/engagement-kit/engagement-kit.js?v=20260130020328"></script>

    <!-- Footer -->
        <div id="kaitrust-footer"></div>

    <!-- Scripts -->
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script>window.WIA_A11Y_CONFIG = { fabBottom: "38px", fabRight: "30px" };</script>
    <script src="https://wia.live/wia-a11y-toolkit/wia-a11y-toolkit.min.js"></script>
    <script src="/components/ask-ai/kaitrust-ai-modal.js"></script>
    <script src="/components/language-modal/wia-language-modal-211.js"></script>
    <script src="/glossary/js/term-sections.js"></script>
    <script src="https://kaitrust.ai/components/site-kit/kaitrust-site-kit.js?v=20260130012"></script>
    <script src="/kaitrust-i18n.js?v=20260130012"></script>
</body>
</html>

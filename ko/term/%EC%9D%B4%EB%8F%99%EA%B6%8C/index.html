<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ë™ê¶Œ (Right to Data Portability) | KAITRUST AI ë°±ê³¼ì‚¬ì „</title>
    <meta name="description" content="ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ì—…ìì—ê²Œ ì´ë™ì‹œí‚¬ ê¶Œë¦¬. GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2ì—ì„œ ë³´ì¥.">
    <meta name="keywords" content="ì´ë™ê¶Œ, Right to Data Portability, AI ìš©ì–´, KAITRUST, AI ë°±ê³¼ì‚¬ì „, AI ê·œì œ/ìœ¤ë¦¬">
    <link rel="canonical" href="https://glossary.kaitrust.ai/ko/term/%EC%9D%B4%EB%8F%99%EA%B6%8C/">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://glossary.kaitrust.ai/ko/term/%EC%9D%B4%EB%8F%99%EA%B6%8C/">
    <meta property="og:title" content="ì´ë™ê¶Œ (Right to Data Portability) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta property="og:description" content="ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ì—…ìì—ê²Œ ì´ë™ì‹œí‚¬ ê¶Œë¦¬. GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2ì—ì„œ ë³´ì¥.">
    <meta property="og:image" content="https://kaitrust.ai/images/og-glossary.png">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="KAITRUST AI ë°±ê³¼ì‚¬ì „">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ì´ë™ê¶Œ (Right to Data Portability) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta name="twitter:description" content="ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ì—…ìì—ê²Œ ì´ë™ì‹œí‚¬ ê¶Œë¦¬. GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2ì—ì„œ ë³´ì¥.">
    <meta name="twitter:image" content="https://kaitrust.ai/images/og-glossary.png">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "DefinedTerm",
        "name": "ì´ë™ê¶Œ",
        "description": "ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ì—…ìì—ê²Œ ì´ë™ì‹œí‚¬ ê¶Œë¦¬. GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2ì—ì„œ ë³´ì¥.",
        "inDefinedTermSet": {
            "@type": "DefinedTermSet",
            "name": "KAITRUST AI ë°±ê³¼ì‚¬ì „",
            "url": "https://glossary.kaitrust.ai/"
        }
    }
    </script>

    <link rel="icon" type="image/png" href="https://kaitrust.ai/favicon.png">
    <link rel="apple-touch-icon" href="https://kaitrust.ai/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Common CSS -->
    <link rel="stylesheet" href="/css/kaitrust-common.css">
    <link rel="stylesheet" href="/css/light-mode.css">
    <link rel="stylesheet" href="/components/ask-ai/kaitrust-ai-modal.css">
    <link rel="stylesheet" href="/glossary/css/term-sections.css">

    <style>
        .term-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 120px 2rem 4rem;
            position: relative;
            z-index: 1;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        .breadcrumb a {
            color: #64748b;
            text-decoration: none;
            transition: color 0.2s;
        }
        .breadcrumb a:hover { color: var(--primary); }
        .breadcrumb span { color: #64748b; }
        .breadcrumb .current { color: var(--accent); font-weight: 500; }
        .term-detail-header {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        .term-category-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #a855f7;
            margin-bottom: 1rem;
        }
        .term-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .term-english {
            font-size: 1.2rem;
            color: #94a3b8;
            margin-bottom: 1.5rem;
        }
        .term-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #e2e8f0;
        }
        .term-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .term-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #a855f7, #6366f1);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3);
        }
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .related-section {
            margin-top: 3rem;
        }
        .related-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #f1f5f9;
        }
        @media (max-width: 768px) {
            .term-detail-container { padding: 100px 1rem 2rem; }
            .term-detail-header { padding: 2rem 1.5rem; }
            .term-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div class="particle-container" id="particles"></div>

    <!-- Header -->
    <div id="kaitrust-header"></div>

    <main class="term-detail-container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="https://kaitrust.ai">í™ˆ</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai">AI ë°±ê³¼ì‚¬ì „</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai/#regulation">AI ê·œì œ/ìœ¤ë¦¬</a>
            <span>â€º</span>
            <span class="current">ì´ë™ê¶Œ</span>
        </nav>

        <!-- Term Header -->
        <article class="term-detail-header">
            <div class="term-category-badge">
                <span>âš–ï¸</span>
                <span>AI ê·œì œ/ìœ¤ë¦¬</span>
            </div>
            <h1 class="term-title">ì´ë™ê¶Œ</h1>
            <p class="term-english">Right to Data Portability</p>
            <div class="term-description">
                <p>ìì‹ ì˜ ê°œì¸ì •ë³´ë¥¼ ë‹¤ë¥¸ ì‚¬ì—…ìì—ê²Œ ì´ë™ì‹œí‚¬ ê¶Œë¦¬. GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2ì—ì„œ ë³´ì¥.</p>
            </div>
            <div class="term-actions">
                <a href="https://glossary.kaitrust.ai" class="term-action-btn btn-primary">
                    ğŸ“š ì „ì²´ ìš©ì–´ ë³´ê¸°
                </a>
                <a href="https://glossary.kaitrust.ai/#regulation" class="term-action-btn btn-secondary">
                    âš–ï¸ AI ê·œì œ/ìœ¤ë¦¬ ë”ë³´ê¸°
                </a>
            </div>
        </article>

        <!-- ìƒì„¸ ì„¤ëª… ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="detail-heading">
            <h2 id="detail-heading" class="section-title">ìƒì„¸ ì„¤ëª…</h2>
            <div class="section-content">
                <p>ì´ë™ê¶Œ(Right to Data Portability)ì€ ì •ë³´ì£¼ì²´ê°€ ìì‹ ì´ ì œê³µí•œ ê°œì¸ì •ë³´ë¥¼ ì²´ê³„ì ì´ê³  ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë©° ê¸°ê³„ íŒë…ì´ ê°€ëŠ¥í•œ í˜•ì‹ìœ¼ë¡œ ì œê³µë°›ê³ , í•´ë‹¹ ì •ë³´ë¥¼ ë‹¤ë¥¸ ì²˜ë¦¬ìì—ê²Œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” ê¶Œë¦¬ì…ë‹ˆë‹¤. GDPR ì œ20ì¡°ì—ì„œ ì²˜ìŒ ë„ì…ëœ ì´ ê¶Œë¦¬ëŠ” ë””ì§€í„¸ ê²½ì œì—ì„œ ê°œì¸ì˜ ë°ì´í„° í†µì œê¶Œì„ ê°•í™”í•˜ê³  ì„œë¹„ìŠ¤ ê°„ ì „í™˜ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.</p>

                <p>ì´ë™ê¶Œì´ ì ìš©ë˜ë ¤ë©´ ì„¸ ê°€ì§€ ì¡°ê±´ì„ ì¶©ì¡±í•´ì•¼ í•©ë‹ˆë‹¤. ì²«ì§¸, ì²˜ë¦¬ì˜ ë²•ì  ê·¼ê±°ê°€ ë™ì˜(ì œ6ì¡° ì œ1í•­ aí˜¸) ë˜ëŠ” ê³„ì•½ ì´í–‰(ì œ6ì¡° ì œ1í•­ bí˜¸)ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ë‘˜ì§¸, ì²˜ë¦¬ê°€ ìë™í™”ëœ ìˆ˜ë‹¨ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤. ì…‹ì§¸, ì •ë³´ì£¼ì²´ê°€ ì§ì ‘ ì œê³µí•œ ë°ì´í„°ì—¬ì•¼ í•©ë‹ˆë‹¤. ê´€ì°°ëœ ë°ì´í„°(ì„¼ì„œ ë°ì´í„°, ê±°ë˜ ë‚´ì—­ ë“±)ë„ í¬í•¨ë˜ë‚˜, ì¶”ë¡ ëœ ë°ì´í„°(ì‹ ìš© ì ìˆ˜, ê±´ê°• ì˜ˆì¸¡ ë“±)ëŠ” ì œì™¸ë©ë‹ˆë‹¤.</p>

                <p>í•œêµ­ ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2(ê°œì¸ì •ë³´ ì „ì†¡ ìš”êµ¬ê¶Œ)ëŠ” 2023ë…„ ê°œì •ìœ¼ë¡œ ë„ì…ë˜ì–´ 2025ë…„ 3ì›”ë¶€í„° ì‹œí–‰ë©ë‹ˆë‹¤. ì •ë³´ì£¼ì²´ëŠ” ì»´í“¨í„° ë“± ì •ë³´ì²˜ë¦¬ì¥ì¹˜ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³¸ì¸ ë˜ëŠ” ë³¸ì¸ì´ ì§€ì •í•˜ëŠ” ìì—ê²Œ ê°œì¸ì •ë³´ ì „ì†¡ì„ ìš”êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ê¸°ìˆ ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ê³¼ë„í•œ ë¹„ìš©ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì˜ˆì™¸ê°€ ì ìš©ë©ë‹ˆë‹¤.</p>

                <p>AI ì‹œìŠ¤í…œì—ì„œ ì´ë™ê¶Œì€ íŠ¹íˆ ì¤‘ìš”í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í•™ìŠµ ë°ì´í„°, í™œë™ ê¸°ë¡, ê°œì¸í™” ì„¤ì • ë“±ì„ ë‹¤ë¥¸ AI ì„œë¹„ìŠ¤ë¡œ ì´ì „í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Open Banking, Data Transfer Project(Google, Apple, Facebook, Microsoft, Twitter) ë“±ì´ ì´ë™ê¶Œ ì‹¤í˜„ì„ ìœ„í•œ í‘œì¤€í™” ë…¸ë ¥ì…ë‹ˆë‹¤. ìœ„ë°˜ ì‹œ GDPR ê¸°ì¤€ ìµœëŒ€ 2,000ë§Œ ìœ ë¡œ ë˜ëŠ” ì „ ì„¸ê³„ ì—°ê°„ ë§¤ì¶œì˜ 4% ê³¼ì§•ê¸ˆì´ ë¶€ê³¼ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ì½”ë“œ ì˜ˆì œ ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="code-heading">
            <h2 id="code-heading" class="section-title">ì½”ë“œ ì˜ˆì œ</h2>
            <div class="section-content">
                <p>Pythonì„ ì‚¬ìš©í•œ ë°ì´í„° ì´ë™ê¶Œ ì²˜ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ ì˜ˆì œì…ë‹ˆë‹¤.</p>
                <pre><code class="language-python">"""
ë°ì´í„° ì´ë™ê¶Œ(Data Portability) ì²˜ë¦¬ ì‹œìŠ¤í…œ
GDPR ì œ20ì¡° ë° ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2 ì¤€ìˆ˜
"""
import json
import csv
from datetime import datetime
from typing import Dict, List, Optional
from dataclasses import dataclass, asdict
from enum import Enum
import hashlib
import zipfile
import io


class DataFormat(Enum):
    """ì§€ì›ë˜ëŠ” ë°ì´í„° í¬ë§·"""
    JSON = "application/json"
    CSV = "text/csv"
    XML = "application/xml"


class TransferStatus(Enum):
    """ì „ì†¡ ìƒíƒœ"""
    PENDING = "pending"
    PROCESSING = "processing"
    COMPLETED = "completed"
    FAILED = "failed"
    EXPIRED = "expired"


@dataclass
class PortabilityRequest:
    """ì´ë™ê¶Œ ìš”ì²­ ë°ì´í„° êµ¬ì¡°"""
    request_id: str
    subject_id: str
    requested_at: datetime
    data_categories: List[str]
    target_format: DataFormat
    recipient_id: Optional[str]  # ì§ì ‘ ì „ì†¡ ì‹œ ìˆ˜ì‹ ì ID
    status: TransferStatus
    expiry_date: datetime


class DataPortabilityHandler:
    """
    ë°ì´í„° ì´ë™ê¶Œ ì²˜ë¦¬ í•¸ë“¤ëŸ¬
    GDPR Article 20 ì¤€ìˆ˜ êµ¬í˜„
    """

    # ì´ë™ ê°€ëŠ¥í•œ ë°ì´í„° ì¹´í…Œê³ ë¦¬ (ì§ì ‘ ì œê³µ + ê´€ì°° ë°ì´í„°)
    PORTABLE_CATEGORIES = {
        "profile": "ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´",
        "activity": "í™œë™ ê¸°ë¡ ë° ê±°ë˜ ë‚´ì—­",
        "preferences": "ì„¤ì • ë° ì„ í˜¸ë„",
        "content": "ì‚¬ìš©ì ìƒì„± ì½˜í…ì¸ ",
        "communications": "ë©”ì‹œì§€ ë° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜",
        "sensor_data": "ì„¼ì„œ/ë””ë°”ì´ìŠ¤ ê´€ì°° ë°ì´í„°"
    }

    # ì œì™¸ ì¹´í…Œê³ ë¦¬ (ì¶”ë¡  ë°ì´í„°)
    EXCLUDED_CATEGORIES = {
        "credit_score": "AI ê¸°ë°˜ ì‹ ìš© ì ìˆ˜",
        "recommendations": "ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ê²°ê³¼",
        "risk_assessment": "ìœ„í—˜ í‰ê°€ ê²°ê³¼",
        "derived_insights": "íŒŒìƒ ë¶„ì„ ë°ì´í„°"
    }

    RESPONSE_DEADLINE_DAYS = 30  # GDPR ê¸°ì¤€ ì‘ë‹µ ê¸°í•œ

    def __init__(self, user_data_store, audit_logger):
        self.user_data_store = user_data_store
        self.audit_logger = audit_logger
        self.pending_requests: Dict[str, PortabilityRequest] = {}

    def create_portability_request(
        self,
        subject_id: str,
        data_categories: List[str],
        target_format: DataFormat = DataFormat.JSON,
        recipient_id: Optional[str] = None
    ) -> PortabilityRequest:
        """
        ì´ë™ê¶Œ ìš”ì²­ ìƒì„±

        Args:
            subject_id: ì •ë³´ì£¼ì²´ ì‹ë³„ì
            data_categories: ìš”ì²­ ë°ì´í„° ì¹´í…Œê³ ë¦¬
            target_format: ì¶œë ¥ í¬ë§·
            recipient_id: ì§ì ‘ ì „ì†¡ ì‹œ ìˆ˜ì‹ ì (GDPR Article 20(2))
        """
        # ìš”ì²­ ID ìƒì„±
        request_id = hashlib.sha256(
            f"{subject_id}:{datetime.now().isoformat()}".encode()
        ).hexdigest()[:16]

        # ìœ íš¨í•œ ì¹´í…Œê³ ë¦¬ë§Œ í•„í„°ë§
        valid_categories = [
            cat for cat in data_categories
            if cat in self.PORTABLE_CATEGORIES
        ]

        # ì œì™¸ ì¹´í…Œê³ ë¦¬ ê²½ê³ 
        excluded = [
            cat for cat in data_categories
            if cat in self.EXCLUDED_CATEGORIES
        ]
        if excluded:
            self.audit_logger.log_warning(
                f"Excluded derived data categories: {excluded}",
                subject_id=subject_id,
                request_id=request_id
            )

        request = PortabilityRequest(
            request_id=request_id,
            subject_id=subject_id,
            requested_at=datetime.now(),
            data_categories=valid_categories,
            target_format=target_format,
            recipient_id=recipient_id,
            status=TransferStatus.PENDING,
            expiry_date=datetime.now() + timedelta(days=self.RESPONSE_DEADLINE_DAYS)
        )

        self.pending_requests[request_id] = request

        # ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
        self.audit_logger.log_event(
            event_type="PORTABILITY_REQUEST_CREATED",
            subject_id=subject_id,
            request_id=request_id,
            details={
                "categories": valid_categories,
                "format": target_format.value,
                "has_recipient": recipient_id is not None
            }
        )

        return request

    def process_request(self, request_id: str) -> bytes:
        """
        ì´ë™ê¶Œ ìš”ì²­ ì²˜ë¦¬ ë° ë°ì´í„° íŒ¨í‚¤ì§•

        Returns:
            bytes: êµ¬ì¡°í™”ëœ í¬í„°ë¸” ë°ì´í„° (ZIP ì•„ì¹´ì´ë¸Œ)
        """
        request = self.pending_requests.get(request_id)
        if not request:
            raise ValueError(f"Request not found: {request_id}")

        # ìƒíƒœ ì—…ë°ì´íŠ¸
        request.status = TransferStatus.PROCESSING

        try:
            # ë°ì´í„° ìˆ˜ì§‘
            collected_data = self._collect_portable_data(
                request.subject_id,
                request.data_categories
            )

            # í¬ë§· ë³€í™˜
            formatted_data = self._format_data(
                collected_data,
                request.target_format
            )

            # ë©”íƒ€ë°ì´í„° ì¶”ê°€
            package = self._create_data_package(
                formatted_data,
                request
            )

            request.status = TransferStatus.COMPLETED

            # ì§ì ‘ ì „ì†¡ ìš”ì²­ì¸ ê²½ìš°
            if request.recipient_id:
                self._transfer_to_recipient(
                    request.recipient_id,
                    package,
                    request
                )

            self.audit_logger.log_event(
                event_type="PORTABILITY_REQUEST_COMPLETED",
                subject_id=request.subject_id,
                request_id=request_id,
                details={"data_size_bytes": len(package)}
            )

            return package

        except Exception as e:
            request.status = TransferStatus.FAILED
            self.audit_logger.log_error(
                f"Portability request failed: {e}",
                request_id=request_id
            )
            raise

    def _collect_portable_data(
        self,
        subject_id: str,
        categories: List[str]
    ) -> Dict:
        """ì¹´í…Œê³ ë¦¬ë³„ í¬í„°ë¸” ë°ì´í„° ìˆ˜ì§‘"""
        data = {}

        for category in categories:
            if category == "profile":
                data["profile"] = self.user_data_store.get_profile(subject_id)
            elif category == "activity":
                data["activity"] = self.user_data_store.get_activities(subject_id)
            elif category == "preferences":
                data["preferences"] = self.user_data_store.get_preferences(subject_id)
            elif category == "content":
                data["content"] = self.user_data_store.get_user_content(subject_id)
            elif category == "communications":
                data["communications"] = self.user_data_store.get_communications(subject_id)
            elif category == "sensor_data":
                data["sensor_data"] = self.user_data_store.get_sensor_data(subject_id)

        return data

    def _format_data(self, data: Dict, format: DataFormat) -> Dict[str, bytes]:
        """ë°ì´í„°ë¥¼ ìš”ì²­ëœ í¬ë§·ìœ¼ë¡œ ë³€í™˜"""
        formatted = {}

        for category, content in data.items():
            if format == DataFormat.JSON:
                formatted[f"{category}.json"] = json.dumps(
                    content,
                    ensure_ascii=False,
                    indent=2,
                    default=str
                ).encode('utf-8')
            elif format == DataFormat.CSV:
                formatted[f"{category}.csv"] = self._to_csv(content)

        return formatted

    def _to_csv(self, data: List[Dict]) -> bytes:
        """ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ CSVë¡œ ë³€í™˜"""
        if not data:
            return b""

        output = io.StringIO()
        writer = csv.DictWriter(output, fieldnames=data[0].keys())
        writer.writeheader()
        writer.writerows(data)
        return output.getvalue().encode('utf-8')

    def _create_data_package(
        self,
        formatted_data: Dict[str, bytes],
        request: PortabilityRequest
    ) -> bytes:
        """ë°ì´í„° íŒ¨í‚¤ì§€(ZIP) ìƒì„± with ë©”íƒ€ë°ì´í„°"""
        buffer = io.BytesIO()

        with zipfile.ZipFile(buffer, 'w', zipfile.ZIP_DEFLATED) as zf:
            # ë©”íƒ€ë°ì´í„° íŒŒì¼ ì¶”ê°€
            metadata = {
                "export_version": "1.0",
                "gdpr_article": "20",
                "exported_at": datetime.now().isoformat(),
                "subject_id_hash": hashlib.sha256(
                    request.subject_id.encode()
                ).hexdigest(),
                "categories": request.data_categories,
                "format": request.target_format.value,
                "data_controller": {
                    "name": "KAITRUST AI Platform",
                    "contact": "privacy@kaitrust.ai"
                },
                "interoperability": {
                    "standard": "Data Transfer Project",
                    "schema_version": "2024.1"
                }
            }

            zf.writestr(
                "metadata.json",
                json.dumps(metadata, ensure_ascii=False, indent=2)
            )

            # ë°ì´í„° íŒŒì¼ ì¶”ê°€
            for filename, content in formatted_data.items():
                zf.writestr(f"data/{filename}", content)

            # ë¬´ê²°ì„± ì²´í¬ì„¬
            checksums = {}
            for filename, content in formatted_data.items():
                checksums[filename] = hashlib.sha256(content).hexdigest()

            zf.writestr(
                "checksums.json",
                json.dumps(checksums, indent=2)
            )

        return buffer.getvalue()

    def _transfer_to_recipient(
        self,
        recipient_id: str,
        package: bytes,
        request: PortabilityRequest
    ):
        """
        ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ê²Œ ì§ì ‘ ì „ì†¡ (Article 20(2))
        ê¸°ìˆ ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ê²½ìš°ì—ë§Œ ì‹¤í–‰
        """
        # ìˆ˜ì‹ ì ì—”ë“œí¬ì¸íŠ¸ ì¡°íšŒ
        recipient = self._lookup_recipient_endpoint(recipient_id)

        if recipient and recipient.get("supports_portability"):
            # ë³´ì•ˆ ì „ì†¡ ìˆ˜í–‰
            self._secure_transfer(
                recipient["endpoint"],
                package,
                request.request_id
            )
        else:
            self.audit_logger.log_warning(
                "Direct transfer not supported by recipient",
                request_id=request.request_id,
                recipient_id=recipient_id
            )


# ì‚¬ìš© ì˜ˆì‹œ
if __name__ == "__main__":
    from datetime import timedelta

    # ëª©ì—… ë°ì´í„° ì €ì¥ì†Œ
    class MockUserDataStore:
        def get_profile(self, uid):
            return {"name": "í™ê¸¸ë™", "email": "hong@example.com"}
        def get_activities(self, uid):
            return [{"action": "login", "timestamp": "2024-01-15T10:00:00"}]
        def get_preferences(self, uid):
            return {"language": "ko", "theme": "dark"}
        def get_user_content(self, uid):
            return [{"type": "post", "content": "AI ê´€ë ¨ ê¸€"}]
        def get_communications(self, uid):
            return []
        def get_sensor_data(self, uid):
            return []

    class MockAuditLogger:
        def log_event(self, **kwargs): print(f"EVENT: {kwargs}")
        def log_warning(self, msg, **kwargs): print(f"WARN: {msg}")
        def log_error(self, msg, **kwargs): print(f"ERROR: {msg}")

    handler = DataPortabilityHandler(MockUserDataStore(), MockAuditLogger())

    # ì´ë™ê¶Œ ìš”ì²­ ìƒì„±
    request = handler.create_portability_request(
        subject_id="user_12345",
        data_categories=["profile", "activity", "preferences", "credit_score"],
        target_format=DataFormat.JSON
    )

    print(f"Request ID: {request.request_id}")
    print(f"Valid categories: {request.data_categories}")
    print(f"Deadline: {request.expiry_date}")

    # ìš”ì²­ ì²˜ë¦¬
    package = handler.process_request(request.request_id)
    print(f"Package size: {len(package)} bytes")</code></pre>
            </div>
        </section>

        <!-- ì‹¤ë¬´ ëŒ€í™” ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="conversation-heading">
            <h2 id="conversation-heading" class="section-title">ì‹¤ë¬´ ëŒ€í™”</h2>
            <div class="section-content">
                <div class="conversation-tabs">
                    <button class="tab-btn active" data-tab="meeting">íšŒì˜</button>
                    <button class="tab-btn" data-tab="interview">ë©´ì ‘</button>
                    <button class="tab-btn" data-tab="review">ì½”ë“œë¦¬ë·°</button>
                </div>

                <div class="tab-content active" id="meeting">
                    <div class="dialogue">
                        <div class="dialogue-item">
                            <span class="speaker pm">PM:</span>
                            <span class="speech">ê²½ìŸì‚¬ë¡œ ê³ ê° ì´íƒˆ ì‹œ ë°ì´í„° ì´ë™ê¶Œ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ëŒ€ì‘í•´ì•¼ í• ê¹Œìš”?</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker dev">ê°œë°œì:</span>
                            <span class="speech">GDPR ì œ20ì¡°ì— ë”°ë¥´ë©´ 30ì¼ ì´ë‚´ ì‘ë‹µí•´ì•¼ í•©ë‹ˆë‹¤. JSONì´ë‚˜ CSV ê°™ì€ ê¸°ê³„ íŒë… ê°€ëŠ¥ í˜•ì‹ìœ¼ë¡œ ì œê³µí•´ì•¼ í•˜ê³ ìš”, ê³ ê°ì´ ìš”ì²­í•˜ë©´ ê²½ìŸì‚¬ì— ì§ì ‘ ì „ì†¡ë„ í•´ì•¼ í•©ë‹ˆë‹¤.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker pm">PM:</span>
                            <span class="speech">ëª¨ë“  ë°ì´í„°ë¥¼ ë‹¤ ì¤˜ì•¼ í•˜ë‚˜ìš”? AI ì¶”ì²œ ê²°ê³¼ë‚˜ ë¶„ì„ ë°ì´í„°ë„ìš”?</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker dev">ê°œë°œì:</span>
                            <span class="speech">ì•„ë‹™ë‹ˆë‹¤. ì´ë™ê¶Œì€ ê³ ê°ì´ ì§ì ‘ ì œê³µí•œ ë°ì´í„°ì™€ ê´€ì°°ëœ ë°ì´í„°ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. ì‹ ìš© ì ìˆ˜ë‚˜ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ê²°ê³¼ ê°™ì€ ì¶”ë¡  ë°ì´í„°ëŠ” ì œì™¸ë©ë‹ˆë‹¤. ë‹¨, ìš”ì²­ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ê°€ ì™œ ì œì™¸ë˜ëŠ”ì§€ ì„¤ëª…ì€ í•´ì•¼ í•©ë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="interview">
                    <div class="dialogue">
                        <div class="dialogue-item">
                            <span class="speaker interviewer">ë©´ì ‘ê´€:</span>
                            <span class="speech">ë°ì´í„° ì´ë™ê¶Œê³¼ ì—´ëŒê¶Œì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker candidate">ì§€ì›ì:</span>
                            <span class="speech">ì—´ëŒê¶Œ(ì œ15ì¡°)ì€ ì–´ë–¤ ë°ì´í„°ê°€ ì²˜ë¦¬ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ê¶Œë¦¬ì´ê³ , ì´ë™ê¶Œ(ì œ20ì¡°)ì€ ê·¸ ë°ì´í„°ë¥¼ ê¸°ê³„ íŒë… ê°€ëŠ¥ í˜•ì‹ìœ¼ë¡œ ë°›ì•„ì„œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆëŠ” ê¶Œë¦¬ì…ë‹ˆë‹¤. ì—´ëŒê¶Œì€ ëª¨ë“  ì²˜ë¦¬ ë°ì´í„°ì— ì ìš©ë˜ì§€ë§Œ, ì´ë™ê¶Œì€ ë™ì˜ë‚˜ ê³„ì•½ì— ê¸°ë°˜í•œ ìë™í™” ì²˜ë¦¬ ë°ì´í„°ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker interviewer">ë©´ì ‘ê´€:</span>
                            <span class="speech">ì´ë™ê¶Œì˜ ê¸°ìˆ ì  ì œí•œì€ ë¬´ì—‡ì¸ê°€ìš”?</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker candidate">ì§€ì›ì:</span>
                            <span class="speech">ì§ì ‘ ì „ì†¡ì˜ ê²½ìš° 'ê¸°ìˆ ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ê²½ìš°'ë¼ëŠ” ì¡°ê±´ì´ ìˆìŠµë‹ˆë‹¤. í‘œì¤€ APIê°€ ì—†ê±°ë‚˜ ë³´ì•ˆ ìœ„í—˜ì´ ìˆìœ¼ë©´ ê±°ë¶€í•  ìˆ˜ ìˆì–´ìš”. í•˜ì§€ë§Œ Data Transfer Project ê°™ì€ ì—…ê³„ ì´ë‹ˆì…”í‹°ë¸Œê°€ ìƒí˜¸ìš´ìš©ì„±ì„ ë†’ì´ê³  ìˆìŠµë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="review">
                    <div class="dialogue">
                        <div class="dialogue-item">
                            <span class="speaker reviewer">ë¦¬ë·°ì–´:</span>
                            <span class="speech">ì´ export í•¨ìˆ˜ì—ì„œ ì¶”ë¡  ë°ì´í„°ë„ í¬í•¨í•˜ê³  ìˆë„¤ìš”. ì´ë™ê¶Œ ëŒ€ìƒì´ ì•„ë‹Œ ë°ì´í„°ê¹Œì§€ ë‚´ë³´ë‚´ë©´ ì•ˆ ë©ë‹ˆë‹¤.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker author">ì‘ì„±ì:</span>
                            <span class="speech">ë§ìŠµë‹ˆë‹¤. GDPR ê°€ì´ë“œë¼ì¸ì„ ë‹¤ì‹œ í™•ì¸í–ˆëŠ”ë°, 'provided by' ë°ì´í„°ë§Œ í•´ë‹¹ë©ë‹ˆë‹¤. ì‹ ìš©ì ìˆ˜ë‚˜ ì¶”ì²œ ê²°ê³¼ëŠ” 'inferred' ë°ì´í„°ë¼ì„œ ì œì™¸í•´ì•¼ê² ë„¤ìš”.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker reviewer">ë¦¬ë·°ì–´:</span>
                            <span class="speech">ê·¸ë¦¬ê³  ì¶œë ¥ í˜•ì‹ë„ í™•ì¸í•´ì£¼ì„¸ìš”. PDFë‚˜ ì´ë¯¸ì§€ëŠ” 'ê¸°ê³„ íŒë… ê°€ëŠ¥'í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. JSON, CSV, XML ê°™ì€ êµ¬ì¡°í™”ëœ í˜•ì‹ì´ì–´ì•¼ í•©ë‹ˆë‹¤.</span>
                        </div>
                        <div class="dialogue-item">
                            <span class="speaker author">ì‘ì„±ì:</span>
                            <span class="speech">ë„¤, í‘œì¤€ ìŠ¤í‚¤ë§ˆë„ ì ìš©í•˜ê² ìŠµë‹ˆë‹¤. Data Transfer Project í˜•ì‹ì„ ë”°ë¥´ë©´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì™€ì˜ ìƒí˜¸ìš´ìš©ì„±ë„ í™•ë³´ë©ë‹ˆë‹¤.</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì£¼ì˜ì‚¬í•­ ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="caution-heading">
            <h2 id="caution-heading" class="section-title">ì£¼ì˜ì‚¬í•­</h2>
            <div class="section-content">
                <div class="caution-grid">
                    <div class="caution-item">
                        <h3>ì´ë™ê¶Œ ì ìš© ë²”ìœ„ í•œì •</h3>
                        <p>ì´ë™ê¶Œì€ ì •ë³´ì£¼ì²´ê°€ 'ì œê³µí•œ' ë°ì´í„°(í”„ë¡œí•„, ì„¤ì •)ì™€ 'ê´€ì°°ëœ' ë°ì´í„°(í™œë™ ê¸°ë¡, ì„¼ì„œ ë°ì´í„°)ì—ë§Œ ì ìš©ë©ë‹ˆë‹¤. AIê°€ ë¶„ì„í•˜ê±°ë‚˜ ì¶”ë¡ í•œ ë°ì´í„°(ì‹ ìš©ì ìˆ˜, ì¶”ì²œ ê²°ê³¼, ìœ„í—˜ í‰ê°€)ëŠ” ì œì™¸ë©ë‹ˆë‹¤. ë˜í•œ ë™ì˜ë‚˜ ê³„ì•½ì— ê¸°ë°˜í•œ ìë™í™” ì²˜ë¦¬ì—ë§Œ ì ìš©ë˜ë¯€ë¡œ, ë²•ì  ì˜ë¬´ ìˆ˜í–‰ì´ë‚˜ ì •ë‹¹í•œ ì´ìµì— ê¸°ë°˜í•œ ì²˜ë¦¬ëŠ” ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤.</p>
                    </div>
                    <div class="caution-item">
                        <h3>ì œ3ì ê¶Œë¦¬ ë³´í˜¸</h3>
                        <p>ì´ë™ê¶Œ í–‰ì‚¬ê°€ ë‹¤ë¥¸ ì‚¬ëŒì˜ ê¶Œë¦¬ì™€ ììœ ì— ë¶€ì •ì  ì˜í–¥ì„ ë¯¸ì³ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ê³µìœ ëœ ëŒ€í™” ê¸°ë¡ì„ ì´ë™í•  ë•Œ ìƒëŒ€ë°©ì˜ í”„ë¼ì´ë²„ì‹œë¥¼ ì¹¨í•´í•˜ê±°ë‚˜, ì˜ì—… ë¹„ë°€ì´ í¬í•¨ëœ ë°ì´í„°ë¥¼ ê²½ìŸì‚¬ë¡œ ì´ì „í•˜ëŠ” ê²ƒì€ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš° ë°ì´í„°ë¥¼ ìµëª…í™”í•˜ê±°ë‚˜ ì œ3ì ê´€ë ¨ ë¶€ë¶„ì„ ì œê±°í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    </div>
                    <div class="caution-item">
                        <h3>ê¸°ìˆ ì  ìƒí˜¸ìš´ìš©ì„± í™•ë³´</h3>
                        <p>ì§ì ‘ ì „ì†¡(controller-to-controller)ì€ 'ê¸°ìˆ ì ìœ¼ë¡œ ê°€ëŠ¥í•œ ê²½ìš°'ì—ë§Œ ì˜ë¬´ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ í‘œì¤€ APIë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ” ê²ƒì€ ì´ë™ê¶Œì„ íšŒí”¼í•˜ë ¤ëŠ” ì‹œë„ë¡œ í•´ì„ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Data Transfer Project, Open Banking í‘œì¤€ ë“±ì„ ì ê·¹ ì§€ì›í•˜ê³ , ì œê³µí•˜ëŠ” ë°ì´í„° í˜•ì‹ê³¼ ìŠ¤í‚¤ë§ˆë¥¼ ë¬¸ì„œí™”í•´ì•¼ í•©ë‹ˆë‹¤. ë³´ì•ˆ ìœ„í—˜ ì—†ì´ ì „ì†¡ì´ ê°€ëŠ¥í•˜ë„ë¡ ì•”í˜¸í™”ì™€ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ë„ ê°–ì¶°ì•¼ í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ê´€ë ¨ ìš©ì–´ ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="related-heading">
            <h2 id="related-heading" class="section-title">ê´€ë ¨ ìš©ì–´</h2>
            <div class="section-content">
                <div class="related-terms">
                    <a href="/ko/term/%EC%97%B4%EB%9E%8C%EA%B6%8C/" class="related-term-card">
                        <span class="term-name">ì—´ëŒê¶Œ</span>
                        <span class="term-desc">ê°œì¸ì •ë³´ ì²˜ë¦¬ ë‚´ì—­ì„ í™•ì¸í•  ê¶Œë¦¬</span>
                    </a>
                    <a href="/ko/term/%EC%A0%95%EB%B3%B4%EC%A3%BC%EC%B2%B4/" class="related-term-card">
                        <span class="term-name">ì •ë³´ì£¼ì²´</span>
                        <span class="term-desc">ê°œì¸ì •ë³´ì˜ ì£¼ì²´ê°€ ë˜ëŠ” ìì—°ì¸</span>
                    </a>
                    <a href="/ko/term/%EC%A0%95%EC%A0%95%EA%B6%8C/" class="related-term-card">
                        <span class="term-name">ì •ì •ê¶Œ</span>
                        <span class="term-desc">ë¶€ì •í™•í•œ ê°œì¸ì •ë³´ë¥¼ ì •ì • ìš”ì²­í•  ê¶Œë¦¬</span>
                    </a>
                    <a href="/ko/term/%EC%82%AD%EC%A0%9C%EA%B6%8C/" class="related-term-card">
                        <span class="term-name">ì‚­ì œê¶Œ</span>
                        <span class="term-desc">ê°œì¸ì •ë³´ì˜ ì‚­ì œë¥¼ ìš”ì²­í•  ê¶Œë¦¬</span>
                    </a>
                    <a href="/ko/term/%ED%91%9C%EC%A4%80%EA%B3%84%EC%95%BD%EC%A1%B0%ED%95%AD/" class="related-term-card">
                        <span class="term-name">í‘œì¤€ê³„ì•½ì¡°í•­</span>
                        <span class="term-desc">ê°œì¸ì •ë³´ êµ­ì™¸ì´ì „ ì‹œ ì‚¬ìš©í•˜ëŠ” í‘œì¤€ ê³„ì•½ ì¡°ê±´</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- ë” ë°°ìš°ê¸° ì„¹ì…˜ -->
        <section class="term-section" aria-labelledby="learn-more-heading">
            <h2 id="learn-more-heading" class="section-title">ë” ë°°ìš°ê¸°</h2>
            <div class="section-content">
                <div class="learn-more-grid">
                    <a href="https://edpb.europa.eu/our-work-tools/our-documents/guidelines/guidelines-202001-data-portability_en" class="learn-more-card" target="_blank" rel="noopener">
                        <span class="source-tag">EDPB</span>
                        <span class="title">Guidelines on Data Portability</span>
                        <span class="desc">ìœ ëŸ½ ë°ì´í„°ë³´í˜¸ìœ„ì›íšŒì˜ ì´ë™ê¶Œ ê°€ì´ë“œë¼ì¸ ë° FAQ</span>
                    </a>
                    <a href="https://datatransferproject.dev/" class="learn-more-card" target="_blank" rel="noopener">
                        <span class="source-tag">DTP</span>
                        <span class="title">Data Transfer Project</span>
                        <span class="desc">Google, Apple ë“±ì´ ì°¸ì—¬í•˜ëŠ” ë°ì´í„° ì´ë™ì„± ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸</span>
                    </a>
                    <a href="https://www.law.go.kr/ë²•ë ¹/ê°œì¸ì •ë³´ë³´í˜¸ë²•" class="learn-more-card" target="_blank" rel="noopener">
                        <span class="source-tag">ë²•ë ¹</span>
                        <span class="title">ê°œì¸ì •ë³´ë³´í˜¸ë²• ì œ35ì¡°ì˜2</span>
                        <span class="desc">í•œêµ­ ê°œì¸ì •ë³´ ì „ì†¡ ìš”êµ¬ê¶Œ ë²•ë¥  ì¡°ë¬¸</span>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="kaitrust-footer"></div>

    <!-- Scripts -->
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script>window.WIA_A11Y_CONFIG = { fabBottom: "38px", fabRight: "30px" };</script>
    <script src="https://wia.live/wia-a11y-toolkit/wia-a11y-toolkit.min.js"></script>
    <script src="/components/ask-ai/kaitrust-ai-modal.js"></script>
    <script src="/glossary/js/term-sections.js"></script>
    <script src="https://kaitrust.ai/components/site-kit/kaitrust-site-kit.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB (MongoDB Document DB) | KAITRUST AI ë°±ê³¼ì‚¬ì „</title>
    <meta name="description" content="MongoDBëŠ” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¬¸ì„œ ì§€í–¥ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. JSON í˜•íƒœì˜ BSON ë¬¸ì„œë¥¼ ì €ì¥í•˜ë©°, ìŠ¤í‚¤ë§ˆë¦¬ìŠ¤ íŠ¹ì„±ìœ¼ë¡œ ìœ ì—°í•œ ë°ì´í„° ëª¨ë¸ë§ê³¼ ìˆ˜í‰ í™•ì¥ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.">
    <meta name="keywords" content="MongoDB, NoSQL, Document DB, BSON, ìŠ¤í‚¤ë§ˆë¦¬ìŠ¤, ìƒ¤ë”©, ë ˆí”Œë¦¬ì¹´ì…‹, AI ìš©ì–´, KAITRUST">
    <link rel="canonical" href="https://glossary.kaitrust.ai/ko/term/MongoDB/">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://glossary.kaitrust.ai/ko/term/MongoDB/">
    <meta property="og:title" content="MongoDB (MongoDB Document DB) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta property="og:description" content="MongoDBëŠ” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¬¸ì„œ ì§€í–¥ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤.">
    <meta property="og:image" content="https://kaitrust.ai/images/og-glossary.png">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="KAITRUST AI ë°±ê³¼ì‚¬ì „">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MongoDB (MongoDB Document DB) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta name="twitter:description" content="MongoDBëŠ” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¬¸ì„œ ì§€í–¥ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤.">
    <meta name="twitter:image" content="https://kaitrust.ai/images/og-glossary.png">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "DefinedTerm",
        "name": "MongoDB",
        "alternateName": "MongoDB Document DB",
        "description": "MongoDBëŠ” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¬¸ì„œ ì§€í–¥ NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤.",
        "inDefinedTermSet": {
            "@type": "DefinedTermSet",
            "name": "KAITRUST AI ë°±ê³¼ì‚¬ì „",
            "url": "https://glossary.kaitrust.ai/"
        }
    }
    </script>

    <link rel="icon" type="image/png" href="https://kaitrust.ai/favicon.png">
    <link rel="apple-touch-icon" href="https://kaitrust.ai/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Common CSS -->
    <link rel="stylesheet" href="/css/kaitrust-common.css">
    <link rel="stylesheet" href="/css/light-mode.css">
    <link rel="stylesheet" href="/components/ask-ai/kaitrust-ai-modal.css">

    <style>
        /* ê³ ë„í™” ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .term-section {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(168, 85, 247, 0.1);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
        }
        .section-content p {
            color: #cbd5e1;
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        .section-content p:last-child { margin-bottom: 0; }

        /* ì½”ë“œ ë¸”ë¡ */
        .code-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .code-tab {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.2s;
        }
        .code-tab.active {
            background: rgba(168, 85, 247, 0.2);
            border-color: #a855f7;
            color: #a855f7;
        }
        .code-block {
            position: relative;
            background: #0f172a;
            border-radius: 12px;
            overflow: hidden;
            display: none;
        }
        .code-block.active { display: block; }
        .code-block pre { padding: 1.5rem; margin: 0; overflow-x: auto; }
        .code-block code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #e2e8f0;
            line-height: 1.6;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.3);
            border: none;
            border-radius: 6px;
            color: #e2e8f0;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .copy-btn:hover { background: rgba(168, 85, 247, 0.5); }

        /* ëŒ€í™” ì˜ˆì‹œ */
        .conversation-examples { display: flex; flex-direction: column; gap: 1.5rem; }
        .conv-item { background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 1.25rem; }
        .conv-context { font-size: 0.9rem; color: #a855f7; font-weight: 500; margin-bottom: 0.75rem; }
        .conv-quote {
            color: #e2e8f0;
            font-style: italic;
            line-height: 1.7;
            margin: 0;
            padding-left: 1rem;
            border-left: 3px solid #a855f7;
        }

        /* ì£¼ì˜ì‚¬í•­ */
        .warning-list { display: flex; flex-direction: column; gap: 1rem; }
        .warning-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        .warning-icon { font-size: 1.5rem; }
        .warning-item strong { color: #f1f5f9; display: block; margin-bottom: 0.25rem; }
        .warning-item p { color: #94a3b8; margin: 0; font-size: 0.95rem; }

        /* ê´€ë ¨ ìš©ì–´ */
        .related-terms { display: flex; flex-wrap: wrap; gap: 0.75rem; }
        .related-term-link {
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 20px;
            color: #a855f7;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .related-term-link:hover { background: rgba(168, 85, 247, 0.2); transform: translateY(-2px); }

        /* ë” ë°°ìš°ê¸° */
        .learn-more { display: flex; flex-direction: column; gap: 0.75rem; }
        .learn-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            color: #00f5ff;
            text-decoration: none;
            transition: all 0.2s;
        }
        .learn-link:hover { background: rgba(0, 0, 0, 0.3); transform: translateX(5px); }

        .term-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 120px 2rem 4rem;
            position: relative;
            z-index: 1;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        .breadcrumb a { color: #64748b; text-decoration: none; transition: color 0.2s; }
        .breadcrumb a:hover { color: var(--primary); }
        .breadcrumb span { color: #64748b; }
        .breadcrumb .current { color: var(--accent); font-weight: 500; }
        .term-detail-header {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        .term-category-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #a855f7;
            margin-bottom: 1rem;
        }
        .term-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .term-english { font-size: 1.2rem; color: #94a3b8; margin-bottom: 1.5rem; }
        .term-description { font-size: 1.1rem; line-height: 1.8; color: #e2e8f0; }
        .term-actions { display: flex; gap: 1rem; margin-top: 2rem; flex-wrap: wrap; }
        .term-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s;
        }
        .btn-primary { background: linear-gradient(135deg, #a855f7, #6366f1); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3); }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #e2e8f0; border: 1px solid rgba(255, 255, 255, 0.2); }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
        @media (max-width: 768px) {
            .term-detail-container { padding: 100px 1rem 2rem; }
            .term-detail-header { padding: 2rem 1.5rem; }
            .term-title { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div class="particle-container" id="particles"></div>

    <!-- Header -->
    <div id="kaitrust-header"></div>

    <main class="term-detail-container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="https://kaitrust.ai">í™ˆ</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai">AI ë°±ê³¼ì‚¬ì „</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai/#db">ë°ì´í„°ë² ì´ìŠ¤</a>
            <span>â€º</span>
            <span class="current">MongoDB</span>
        </nav>

        <!-- Term Header -->
        <article class="term-detail-header">
            <div class="term-category-badge">
                <span>ğŸ—„ï¸</span>
                <span>ë°ì´í„°ë² ì´ìŠ¤</span>
            </div>
            <h1 class="term-title">MongoDB</h1>
            <p class="term-english">The Developer Data Platform</p>
            <div class="term-description">
                <p>MongoDBëŠ” ê°€ì¥ ì¸ê¸° ìˆëŠ” ë¬¸ì„œ ì§€í–¥(Document-Oriented) NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. JSON í˜•íƒœì˜ BSON ë¬¸ì„œë¥¼ ì €ì¥í•˜ë©°, ìŠ¤í‚¤ë§ˆë¦¬ìŠ¤(Schema-less) íŠ¹ì„±ìœ¼ë¡œ ìœ ì—°í•œ ë°ì´í„° ëª¨ë¸ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë ˆí”Œë¦¬ì¹´ì…‹ê³¼ ìƒ¤ë”©ìœ¼ë¡œ ê³ ê°€ìš©ì„±ê³¼ ìˆ˜í‰ í™•ì¥ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="term-actions">
                <a href="https://glossary.kaitrust.ai" class="term-action-btn btn-primary">
                    ğŸ“š ì „ì²´ ìš©ì–´ ë³´ê¸°
                </a>
                <a href="https://glossary.kaitrust.ai/#db" class="term-action-btn btn-secondary">
                    ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë”ë³´ê¸°
                </a>
            </div>
        </article>

        <!-- ìƒì„¸ ì„¤ëª… -->
        <section class="term-section">
            <h2 class="section-title">ğŸ“– ìƒì„¸ ì„¤ëª…</h2>
            <div class="section-content">
                <p><strong>ë¬¸ì„œ ì§€í–¥ ë°ì´í„° ëª¨ë¸</strong> - MongoDBëŠ” í…Œì´ë¸”/í–‰ ëŒ€ì‹  ì»¬ë ‰ì…˜/ë¬¸ì„œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¬¸ì„œëŠ” JSONê³¼ ìœ ì‚¬í•œ BSON(Binary JSON) í˜•íƒœë¡œ ì €ì¥ë˜ë©°, ì¤‘ì²© ê°ì²´ì™€ ë°°ì—´ì„ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„í•©ë‹ˆë‹¤. ê´€ê³„í˜• DBì—ì„œ ì—¬ëŸ¬ í…Œì´ë¸”ë¡œ ë¶„ì‚°ë  ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ë¬¸ì„œì— ì„ë² ë”©í•˜ì—¬ JOIN ì—†ì´ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p><strong>ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±</strong> - ì»¬ë ‰ì…˜ì— ë¯¸ë¦¬ ìŠ¤í‚¤ë§ˆë¥¼ ì •ì˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ê°™ì€ ì»¬ë ‰ì…˜ ë‚´ ë¬¸ì„œê°€ ì„œë¡œ ë‹¤ë¥¸ í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì–´, ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì— ëŒ€ì‘í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤. MongoDB 3.6ë¶€í„°ëŠ” JSON Schemaë¡œ ì„ íƒì  ìŠ¤í‚¤ë§ˆ ê²€ì¦ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                <p><strong>ë ˆí”Œë¦¬ì¹´ì…‹(Replica Set)</strong> - MongoDBì˜ ê³ ê°€ìš©ì„± ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. Primary 1ëŒ€ì™€ Secondary ì—¬ëŸ¬ ëŒ€ë¡œ êµ¬ì„±ë˜ë©°, Primary ì¥ì•  ì‹œ ìë™ í˜ì¼ì˜¤ë²„ê°€ ë°œìƒí•©ë‹ˆë‹¤. Secondaryì—ì„œ ì½ê¸° ë¶€í•˜ë¥¼ ë¶„ì‚°í•˜ê³ , ë°ì´í„° ë³µì œë¡œ ë‚´êµ¬ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.</p>
                <p><strong>ìƒ¤ë”©(Sharding)</strong> - ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì„œë²„ì— ë¶„ì‚° ì €ì¥í•˜ëŠ” ìˆ˜í‰ í™•ì¥ ë°©ì‹ì…ë‹ˆë‹¤. Shard Keyë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ê°€ ë¶„í• ë˜ë©°, mongos ë¼ìš°í„°ê°€ ì¿¼ë¦¬ë¥¼ ì ì ˆí•œ ìƒ¤ë“œë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. í˜íƒ€ë°”ì´íŠ¸ê¸‰ ë°ì´í„° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                <p><strong>Aggregation Pipeline</strong> - ë°ì´í„° ë³€í™˜ê³¼ ë¶„ì„ì„ ìœ„í•œ ê°•ë ¥í•œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. $match, $group, $sort, $lookup(JOIN) ë“±ì˜ ìŠ¤í…Œì´ì§€ë¥¼ ì—°ê²°í•˜ì—¬ ë³µì¡í•œ ë°ì´í„° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. Map-Reduceë³´ë‹¤ ì„±ëŠ¥ì´ ìš°ìˆ˜í•˜ë©°, ëŒ€ë¶€ë¶„ì˜ ë¶„ì„ ì‘ì—…ì— ê¶Œì¥ë©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ì½”ë“œ ì˜ˆì œ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ’» ì½”ë“œ ì˜ˆì œ</h2>
            <div class="code-tabs">
                <button class="code-tab active" data-lang="python">Python (pymongo)</button>
                <button class="code-tab" data-lang="node">Node.js (mongodb)</button>
                <button class="code-tab" data-lang="shell">MongoDB Shell</button>
            </div>
            <div class="code-block active" data-lang="python">
                <pre><code class="language-python"># MongoDB ì—°ê²° ë° CRUD - Python + pymongo
from pymongo import MongoClient, ASCENDING, DESCENDING
from pymongo.errors import DuplicateKeyError, BulkWriteError
from bson import ObjectId
from datetime import datetime

# ì—°ê²° ì„¤ì • (ë ˆí”Œë¦¬ì¹´ì…‹)
client = MongoClient(
    "mongodb://localhost:27017,localhost:27018,localhost:27019",
    replicaSet="rs0",
    readPreference="secondaryPreferred"  # ì½ê¸°ëŠ” Secondary ìš°ì„ 
)

db = client["myapp"]
products = db["products"]


# ë¬¸ì„œ ì‚½ì…
def create_product(product_data: dict):
    """ë¬¸ì„œ ì‚½ì… - ìë™ _id ìƒì„±"""
    product = {
        "name": product_data["name"],
        "price": product_data["price"],
        "category": product_data["category"],
        "specs": product_data.get("specs", {}),  # ì¤‘ì²© ê°ì²´
        "tags": product_data.get("tags", []),    # ë°°ì—´
        "created_at": datetime.utcnow(),
        "updated_at": datetime.utcnow()
    }
    result = products.insert_one(product)
    print(f"âœ… ì‚½ì…ë¨: {result.inserted_id}")
    return result.inserted_id


# ë¬¸ì„œ ì¡°íšŒ (ë‹¤ì–‘í•œ ì¿¼ë¦¬)
def find_products():
    """ë‹¤ì–‘í•œ ì¿¼ë¦¬ íŒ¨í„´"""

    # ê¸°ë³¸ ì¡°íšŒ
    product = products.find_one({"name": "MacBook Pro"})

    # ë¹„êµ ì—°ì‚°ì
    expensive = products.find({"price": {"$gte": 1000, "$lte": 2000}})

    # ë°°ì—´ ê²€ìƒ‰ - íƒœê·¸ì— 'flagship' í¬í•¨
    flagships = products.find({"tags": "flagship"})

    # ì¤‘ì²© ê°ì²´ í•„ë“œ ê²€ìƒ‰ (ì  í‘œê¸°ë²•)
    apple_products = products.find({"specs.brand": "Apple"})

    # ì •ê·œì‹ ê²€ìƒ‰
    iphones = products.find({"name": {"$regex": "iPhone", "$options": "i"}})

    # í”„ë¡œì ì…˜ (í•„ë“œ ì„ íƒ)
    names_only = products.find(
        {"category": "smartphone"},
        {"name": 1, "price": 1, "_id": 0}  # 1=í¬í•¨, 0=ì œì™¸
    )

    # ì •ë ¬, ì œí•œ, ìŠ¤í‚µ
    recent = products.find().sort("created_at", DESCENDING).limit(10).skip(0)

    return list(recent)


# ë¬¸ì„œ ì—…ë°ì´íŠ¸
def update_product(product_id: str, updates: dict):
    """ë¬¸ì„œ ì—…ë°ì´íŠ¸ - ë‹¤ì–‘í•œ ì—°ì‚°ì"""

    result = products.update_one(
        {"_id": ObjectId(product_id)},
        {
            "$set": {
                "price": updates.get("price"),
                "updated_at": datetime.utcnow()
            },
            "$push": {"tags": "sale"},           # ë°°ì—´ì— ì¶”ê°€
            "$inc": {"view_count": 1},           # ìˆ«ì ì¦ê°€
            "$addToSet": {"categories": "new"}   # ì¤‘ë³µ ì—†ì´ ì¶”ê°€
        }
    )
    print(f"ìˆ˜ì •ë¨: {result.modified_count}ê°œ")


# Aggregation Pipeline
def get_category_stats():
    """Aggregationìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ë³„ í†µê³„"""

    pipeline = [
        # 1. í•„í„°ë§
        {"$match": {"price": {"$gt": 0}}},

        # 2. ê·¸ë£¹í•‘ ë° ì§‘ê³„
        {"$group": {
            "_id": "$category",
            "count": {"$sum": 1},
            "avg_price": {"$avg": "$price"},
            "max_price": {"$max": "$price"},
            "products": {"$push": "$name"}  # ë°°ì—´ë¡œ ìˆ˜ì§‘
        }},

        # 3. ì •ë ¬
        {"$sort": {"count": -1}},

        # 4. ê²°ê³¼ í˜•íƒœ ë³€í™˜
        {"$project": {
            "category": "$_id",
            "count": 1,
            "avg_price": {"$round": ["$avg_price", 2]},
            "max_price": 1,
            "top_3_products": {"$slice": ["$products", 3]},
            "_id": 0
        }}
    ]

    return list(products.aggregate(pipeline))


# $lookupìœ¼ë¡œ JOIN
def get_products_with_reviews():
    """$lookupìœ¼ë¡œ ì»¬ë ‰ì…˜ ì¡°ì¸"""

    pipeline = [
        {"$lookup": {
            "from": "reviews",              # ì¡°ì¸í•  ì»¬ë ‰ì…˜
            "localField": "_id",            # productsì˜ í•„ë“œ
            "foreignField": "product_id",   # reviewsì˜ í•„ë“œ
            "as": "reviews"                 # ê²°ê³¼ í•„ë“œëª…
        }},
        {"$addFields": {
            "review_count": {"$size": "$reviews"},
            "avg_rating": {"$avg": "$reviews.rating"}
        }},
        {"$project": {
            "reviews": 0  # ìƒì„¸ ë¦¬ë·°ëŠ” ì œì™¸
        }}
    ]

    return list(products.aggregate(pipeline))


# íŠ¸ëœì­ì…˜ (MongoDB 4.0+)
def transfer_with_transaction(from_account: str, to_account: str, amount: float):
    """Multi-document íŠ¸ëœì­ì…˜"""

    accounts = db["accounts"]

    with client.start_session() as session:
        with session.start_transaction():
            # ì¶œê¸ˆ
            accounts.update_one(
                {"_id": from_account, "balance": {"$gte": amount}},
                {"$inc": {"balance": -amount}},
                session=session
            )

            # ì…ê¸ˆ
            accounts.update_one(
                {"_id": to_account},
                {"$inc": {"balance": amount}},
                session=session
            )

            # íŠ¸ëœì­ì…˜ ì»¤ë°‹ (ìë™)
            print(f"âœ… ì´ì²´ ì™„ë£Œ: {from_account} â†’ {to_account}, {amount}")


# ì¸ë±ìŠ¤ ìƒì„±
def create_indexes():
    """ì¸ë±ìŠ¤ ìƒì„± - ì¿¼ë¦¬ ì„±ëŠ¥ ìµœì í™”"""

    # ë‹¨ì¼ í•„ë“œ ì¸ë±ìŠ¤
    products.create_index("name")

    # ë³µí•© ì¸ë±ìŠ¤
    products.create_index([("category", ASCENDING), ("price", DESCENDING)])

    # ê³ ìœ  ì¸ë±ìŠ¤
    products.create_index("sku", unique=True)

    # í…ìŠ¤íŠ¸ ì¸ë±ìŠ¤ (ì „ë¬¸ê²€ìƒ‰)
    products.create_index([("name", "text"), ("description", "text")])

    # TTL ì¸ë±ìŠ¤ (ìë™ ì‚­ì œ)
    db["sessions"].create_index("created_at", expireAfterSeconds=3600)

    print("âœ… ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ")


if __name__ == "__main__":
    # ìƒí’ˆ ìƒì„±
    product_id = create_product({
        "name": "iPhone 15 Pro",
        "price": 1299,
        "category": "smartphone",
        "specs": {"brand": "Apple", "storage": "256GB"},
        "tags": ["flagship", "5G"]
    })

    # í†µê³„ ì¡°íšŒ
    stats = get_category_stats()
    print(f"ì¹´í…Œê³ ë¦¬ í†µê³„: {stats}")
</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
            <div class="code-block" data-lang="node">
                <pre><code class="language-javascript">// MongoDB ì—°ê²° ë° CRUD - Node.js + mongodb
const { MongoClient, ObjectId } = require('mongodb');

// ì—°ê²° ì„¤ì •
const uri = 'mongodb://localhost:27017';
const client = new MongoClient(uri, {
    maxPoolSize: 50,
    wtimeoutMS: 2500,
});

let db, products;

async function connect() {
    await client.connect();
    db = client.db('myapp');
    products = db.collection('products');
    console.log('âœ… MongoDB ì—°ê²°ë¨');
}

// ë¬¸ì„œ ì‚½ì…
async function createProduct(productData) {
    const product = {
        ...productData,
        createdAt: new Date(),
        updatedAt: new Date(),
    };

    const result = await products.insertOne(product);
    console.log(`ì‚½ì…ë¨: ${result.insertedId}`);
    return result.insertedId;
}

// ë°°ì¹˜ ì‚½ì…
async function bulkInsert(items) {
    const operations = items.map(item => ({
        updateOne: {
            filter: { sku: item.sku },
            update: { $set: item, $setOnInsert: { createdAt: new Date() } },
            upsert: true
        }
    }));

    const result = await products.bulkWrite(operations);
    console.log(`ì‚½ì…: ${result.upsertedCount}, ìˆ˜ì •: ${result.modifiedCount}`);
}

// ë¬¸ì„œ ì¡°íšŒ
async function findProducts(filters = {}) {
    const cursor = products.find(filters)
        .sort({ createdAt: -1 })
        .limit(20)
        .project({ name: 1, price: 1, category: 1 });

    return await cursor.toArray();
}

// Aggregation Pipeline
async function getCategoryStats() {
    const pipeline = [
        { $match: { price: { $gt: 0 } } },
        {
            $group: {
                _id: '$category',
                count: { $sum: 1 },
                avgPrice: { $avg: '$price' },
                maxPrice: { $max: '$price' },
                products: { $push: '$name' }
            }
        },
        { $sort: { count: -1 } },
        {
            $project: {
                category: '$_id',
                count: 1,
                avgPrice: { $round: ['$avgPrice', 2] },
                top3: { $slice: ['$products', 3] },
                _id: 0
            }
        }
    ];

    return await products.aggregate(pipeline).toArray();
}

// $lookup (JOIN)
async function getProductsWithReviews() {
    const pipeline = [
        {
            $lookup: {
                from: 'reviews',
                localField: '_id',
                foreignField: 'productId',
                as: 'reviews'
            }
        },
        {
            $addFields: {
                reviewCount: { $size: '$reviews' },
                avgRating: { $avg: '$reviews.rating' }
            }
        },
        {
            $project: { reviews: 0 }
        }
    ];

    return await products.aggregate(pipeline).toArray();
}

// íŠ¸ëœì­ì…˜ (MongoDB 4.0+)
async function transferWithTransaction(fromId, toId, amount) {
    const session = client.startSession();
    const accounts = db.collection('accounts');

    try {
        session.startTransaction();

        // ì¶œê¸ˆ
        const fromResult = await accounts.updateOne(
            { _id: fromId, balance: { $gte: amount } },
            { $inc: { balance: -amount } },
            { session }
        );

        if (fromResult.modifiedCount === 0) {
            throw new Error('ì”ì•¡ ë¶€ì¡±');
        }

        // ì…ê¸ˆ
        await accounts.updateOne(
            { _id: toId },
            { $inc: { balance: amount } },
            { session }
        );

        await session.commitTransaction();
        console.log(`âœ… ì´ì²´ ì™„ë£Œ: ${fromId} â†’ ${toId}, ${amount}`);

    } catch (error) {
        await session.abortTransaction();
        console.error(`âŒ ì´ì²´ ì‹¤íŒ¨: ${error.message}`);
        throw error;

    } finally {
        session.endSession();
    }
}

// Change Streams (ì‹¤ì‹œê°„ ë³€ê²½ ê°ì§€)
async function watchChanges() {
    const changeStream = products.watch([
        { $match: { operationType: { $in: ['insert', 'update'] } } }
    ]);

    changeStream.on('change', (change) => {
        console.log('ë³€ê²½ ê°ì§€:', change.operationType, change.documentKey);
    });
}

// ì¸ë±ìŠ¤ ìƒì„±
async function createIndexes() {
    await products.createIndex({ name: 1 });
    await products.createIndex({ category: 1, price: -1 });
    await products.createIndex({ name: 'text', description: 'text' });
    console.log('âœ… ì¸ë±ìŠ¤ ìƒì„± ì™„ë£Œ');
}

// ì‹¤í–‰
(async () => {
    try {
        await connect();
        await createIndexes();

        const stats = await getCategoryStats();
        console.log('ì¹´í…Œê³ ë¦¬ í†µê³„:', stats);

    } finally {
        await client.close();
    }
})();
</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
            <div class="code-block" data-lang="shell">
                <pre><code class="language-javascript">// MongoDB Shell (mongosh) ëª…ë ¹ì–´

// ============================================
// 1. ê¸°ë³¸ CRUD
// ============================================
// ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ
use myapp

// ë¬¸ì„œ ì‚½ì…
db.products.insertOne({
    name: "iPhone 15 Pro",
    price: 1299,
    category: "smartphone",
    specs: { brand: "Apple", storage: "256GB" },
    tags: ["flagship", "5G"],
    createdAt: new Date()
})

// ì—¬ëŸ¬ ë¬¸ì„œ ì‚½ì…
db.products.insertMany([
    { name: "Galaxy S24", price: 999, category: "smartphone" },
    { name: "Pixel 8", price: 699, category: "smartphone" }
])

// ì¡°íšŒ
db.products.find({ category: "smartphone" })
db.products.findOne({ name: "iPhone 15 Pro" })

// ì¡°ê±´ ì—°ì‚°ì
db.products.find({ price: { $gte: 500, $lte: 1000 } })
db.products.find({ tags: { $in: ["flagship", "premium"] } })
db.products.find({ "specs.brand": "Apple" })

// í”„ë¡œì ì…˜
db.products.find({}, { name: 1, price: 1, _id: 0 })

// ì •ë ¬, ì œí•œ
db.products.find().sort({ price: -1 }).limit(5)


// ============================================
// 2. ì—…ë°ì´íŠ¸
// ============================================
// ë‹¨ì¼ ë¬¸ì„œ ì—…ë°ì´íŠ¸
db.products.updateOne(
    { name: "iPhone 15 Pro" },
    {
        $set: { price: 1199 },
        $push: { tags: "sale" },
        $inc: { viewCount: 1 }
    }
)

// ì—¬ëŸ¬ ë¬¸ì„œ ì—…ë°ì´íŠ¸
db.products.updateMany(
    { category: "smartphone" },
    { $set: { inStock: true } }
)

// Upsert (ì—†ìœ¼ë©´ ì‚½ì…)
db.products.updateOne(
    { sku: "IPHONE15PRO" },
    { $set: { name: "iPhone 15 Pro", price: 1299 } },
    { upsert: true }
)


// ============================================
// 3. Aggregation Pipeline
// ============================================
// ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
db.products.aggregate([
    { $match: { price: { $gt: 0 } } },
    { $group: {
        _id: "$category",
        count: { $sum: 1 },
        avgPrice: { $avg: "$price" },
        maxPrice: { $max: "$price" }
    }},
    { $sort: { count: -1 } }
])

// $lookup (JOIN)
db.products.aggregate([
    { $lookup: {
        from: "reviews",
        localField: "_id",
        foreignField: "productId",
        as: "reviews"
    }},
    { $addFields: {
        reviewCount: { $size: "$reviews" },
        avgRating: { $avg: "$reviews.rating" }
    }}
])

// $facet (ë‹¤ì¤‘ íŒŒì´í”„ë¼ì¸)
db.products.aggregate([
    { $facet: {
        byCategory: [
            { $group: { _id: "$category", count: { $sum: 1 } } }
        ],
        priceRanges: [
            { $bucket: {
                groupBy: "$price",
                boundaries: [0, 500, 1000, 2000, Infinity],
                output: { count: { $sum: 1 } }
            }}
        ],
        totalCount: [
            { $count: "total" }
        ]
    }}
])


// ============================================
// 4. ì¸ë±ìŠ¤
// ============================================
// ì¸ë±ìŠ¤ ìƒì„±
db.products.createIndex({ name: 1 })
db.products.createIndex({ category: 1, price: -1 })
db.products.createIndex({ name: "text", description: "text" })

// ê³ ìœ  ì¸ë±ìŠ¤
db.products.createIndex({ sku: 1 }, { unique: true })

// ì¸ë±ìŠ¤ í™•ì¸
db.products.getIndexes()

// ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš
db.products.find({ category: "smartphone" }).explain("executionStats")


// ============================================
// 5. ê´€ë¦¬ ëª…ë ¹ì–´
// ============================================
// ì»¬ë ‰ì…˜ í†µê³„
db.products.stats()

// í˜„ì¬ ì‘ì—…
db.currentOp()

// ë ˆí”Œë¦¬ì¹´ì…‹ ìƒíƒœ
rs.status()

// ìƒ¤ë”© ìƒíƒœ
sh.status()

// ì‚¬ìš©ì ìƒì„±
db.createUser({
    user: "appUser",
    pwd: "securePassword",
    roles: [{ role: "readWrite", db: "myapp" }]
})
</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
        </section>

        <!-- ì‹¤ë¬´ ëŒ€í™” ì˜ˆì‹œ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ—£ï¸ ì‹¤ë¬´ì—ì„œ ì´ë ‡ê²Œ ë§í•˜ì„¸ìš”</h2>
            <div class="conversation-examples">
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ ë°ì´í„° ëª¨ë¸ë§ ë…¼ì˜ì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "ìƒí’ˆê³¼ ë¦¬ë·° ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì €ì¥í• ì§€ ê³ ë¯¼ì¸ë°ìš”, ë¦¬ë·°ê°€ ìƒí’ˆë‹¹ í‰ê·  10ê°œ ì´í•˜ë¼ë©´ ìƒí’ˆ ë¬¸ì„œì— ì„ë² ë”©í•˜ëŠ” ê²Œ ì¢‹ê³ , ê·¸ ì´ìƒì´ë©´ ë³„ë„ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë¶„ë¦¬í•´ì„œ $lookupìœ¼ë¡œ ì¡°ì¸í•˜ëŠ” ê²Œ ë‚«ìŠµë‹ˆë‹¤. ë¬¸ì„œ í¬ê¸° 16MB ì œí•œë„ ê³ ë ¤í•´ì•¼ í•´ìš”."
                    </blockquote>
                </div>
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ ì„±ëŠ¥ ì´ìŠˆ ëŒ€ì‘ì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "explain() ê²°ê³¼ë¥¼ ë³´ë‹ˆ COLLSCANì´ ë°œìƒí•˜ê³  ìˆë„¤ìš”. categoryì™€ createdAtì— ë³µí•© ì¸ë±ìŠ¤ë¥¼ ê±¸ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  find()ì— projectionì„ ì¶”ê°€í•´ì„œ í•„ìš”í•œ í•„ë“œë§Œ ê°€ì ¸ì˜¤ë©´ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ë„ ì¤„ì¼ ìˆ˜ ìˆì–´ìš”."
                    </blockquote>
                </div>
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ í™•ì¥ì„± ì„¤ê³„ íšŒì˜ì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "ë°ì´í„°ê°€ TB ë‹¨ìœ„ë¡œ ëŠ˜ì–´ë‚˜ë©´ ìƒ¤ë”©ì´ í•„ìš”í•©ë‹ˆë‹¤. Shard Key ì„ íƒì´ ì¤‘ìš”í•œë°, user_idì²˜ëŸ¼ ì¹´ë””ë„ë¦¬í‹°ê°€ ë†’ê³  ì¿¼ë¦¬ì— ìì£¼ ì“°ì´ëŠ” í•„ë“œë¥¼ ì„ íƒí•´ì•¼ í•´ìš”. ì˜ëª» ì„ íƒí•˜ë©´ í•«ìŠ¤íŒŸì´ ìƒê²¨ì„œ ë‚˜ì¤‘ì— ì¬ìƒ¤ë”©í•´ì•¼ í•©ë‹ˆë‹¤."
                    </blockquote>
                </div>
            </div>
        </section>

        <!-- ì£¼ì˜ì‚¬í•­ -->
        <section class="term-section">
            <h2 class="section-title">âš ï¸ ì£¼ì˜ì‚¬í•­ & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h2>
            <div class="warning-list">
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>ë¬´ë¶„ë³„í•œ ì„ë² ë”© ê¸ˆì§€</strong>
                        <p>ë¬¸ì„œ í¬ê¸°ëŠ” 16MBë¡œ ì œí•œë©ë‹ˆë‹¤. ë¬´í•œíˆ ì¦ê°€í•  ìˆ˜ ìˆëŠ” ë°°ì—´(ëŒ“ê¸€, ë¡œê·¸ ë“±)ì€ ë³„ë„ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>ì¸ë±ìŠ¤ ì—†ëŠ” ì¿¼ë¦¬ ì£¼ì˜</strong>
                        <p>ì¸ë±ìŠ¤ ì—†ì´ ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ COLLSCANì´ ë°œìƒí•©ë‹ˆë‹¤. explain()ìœ¼ë¡œ ì‹¤í–‰ ê³„íšì„ í™•ì¸í•˜ê³  ì ì ˆí•œ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>íŠ¸ëœì­ì…˜ ê³¼ìš© ê¸ˆì§€</strong>
                        <p>MongoDB íŠ¸ëœì­ì…˜ì€ RDBMSë³´ë‹¤ ì˜¤ë²„í—¤ë“œê°€ í½ë‹ˆë‹¤. ê°€ëŠ¥í•˜ë©´ ë‹¨ì¼ ë¬¸ì„œ ì‘ì—…ìœ¼ë¡œ ì„¤ê³„í•˜ê³ , íŠ¸ëœì­ì…˜ì€ ê¼­ í•„ìš”í•œ ê²½ìš°ë§Œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âœ…</span>
                    <div>
                        <strong>MongoDB ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</strong>
                        <p>ì ì ˆí•œ ë°ì´í„° ëª¨ë¸ë§(ì„ë² ë”© vs ì°¸ì¡°), ì¸ë±ìŠ¤ ì „ëµ ìˆ˜ë¦½, ë ˆí”Œë¦¬ì¹´ì…‹ìœ¼ë¡œ ê³ ê°€ìš©ì„±, Change Streams í™œìš©, Atlas ì‚¬ìš© ì‹œ ê´€ë¦¬ ë¶€ë‹´ ê°ì†Œ.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ê´€ë ¨ ìš©ì–´ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ”— ê´€ë ¨ ìš©ì–´</h2>
            <div class="related-terms">
                <a href="/ko/term/NoSQL/" class="related-term-link">NoSQL</a>
                <a href="/ko/term/Redis/" class="related-term-link">Redis</a>
                <a href="/ko/term/JSON/" class="related-term-link">JSON</a>
                <a href="/ko/term/Replication/" class="related-term-link">Replication</a>
                <a href="/ko/term/Sharding/" class="related-term-link">Sharding</a>
                <a href="/ko/term/CAP/" class="related-term-link">CAP ì •ë¦¬</a>
            </div>
        </section>

        <!-- ë” ë°°ìš°ê¸° -->
        <section class="term-section">
            <h2 class="section-title">ğŸ“š ë” ë°°ìš°ê¸°</h2>
            <div class="learn-more">
                <a href="https://www.mongodb.com/docs/" target="_blank" class="learn-link">
                    ğŸ“„ MongoDB ê³µì‹ ë¬¸ì„œ
                </a>
                <a href="https://university.mongodb.com/" target="_blank" class="learn-link">
                    ğŸ“ MongoDB University - ë¬´ë£Œ ê°•ì˜
                </a>
                <a href="https://www.mongodb.com/docs/manual/core/data-modeling-introduction/" target="_blank" class="learn-link">
                    ğŸ“– MongoDB ë°ì´í„° ëª¨ë¸ë§ ê°€ì´ë“œ
                </a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <div id="kaitrust-footer"></div>

    <!-- Scripts -->
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script>
    function copyCode(btn) {
        const codeBlock = btn.parentElement.querySelector('code');
        navigator.clipboard.writeText(codeBlock.textContent).then(() => {
            btn.textContent = 'âœ… ë³µì‚¬ë¨!';
            setTimeout(() => btn.textContent = 'ğŸ“‹ ë³µì‚¬', 2000);
        });
    }

    document.querySelectorAll('.code-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const lang = this.dataset.lang;
            const section = this.closest('.term-section');
            section.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            section.querySelectorAll('.code-block').forEach(block => {
                block.classList.remove('active');
                if (block.dataset.lang === lang) block.classList.add('active');
            });
        });
    });
    </script>
    <script>window.WIA_A11Y_CONFIG = { fabBottom: "78px", fabRight: "170px" };</script>
    <script src="https://wia.live/wia-a11y-toolkit/wia-a11y-toolkit.min.js"></script>
    <script src="/components/ask-ai/kaitrust-ai-modal.js"></script>
    <script src="https://kaitrust.ai/components/site-kit/kaitrust-site-kit.js"></script>
</body>
</html>

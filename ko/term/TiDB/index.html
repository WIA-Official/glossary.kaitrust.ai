<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TiDB (MySQL Compatible NewSQL) | KAITRUST AI ë°±ê³¼ì‚¬ì „</title>
    <meta name="description" content="TiDBëŠ” MySQL í˜¸í™˜ ë¶„ì‚° NewSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. HTAP(Hybrid Transactional/Analytical Processing)ì„ ì§€ì›í•˜ì—¬ OLTPì™€ OLAP ì›Œí¬ë¡œë“œë¥¼ ë™ì‹œì— ì²˜ë¦¬í•©ë‹ˆë‹¤.">
    <meta name="keywords" content="TiDB, NewSQL, MySQL, ë¶„ì‚° ë°ì´í„°ë² ì´ìŠ¤, HTAP, OLTP, OLAP, PingCAP, AI ìš©ì–´, KAITRUST">
    <link rel="canonical" href="https://glossary.kaitrust.ai/ko/term/TiDB/">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://glossary.kaitrust.ai/ko/term/TiDB/">
    <meta property="og:title" content="TiDB (MySQL Compatible NewSQL) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta property="og:description" content="TiDBëŠ” MySQL í˜¸í™˜ ë¶„ì‚° NewSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ HTAPì„ ì§€ì›í•©ë‹ˆë‹¤.">
    <meta property="og:image" content="https://kaitrust.ai/images/og-glossary.png">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="KAITRUST AI ë°±ê³¼ì‚¬ì „">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TiDB (MySQL Compatible NewSQL) | KAITRUST AI ë°±ê³¼ì‚¬ì „">
    <meta name="twitter:description" content="TiDBëŠ” MySQL í˜¸í™˜ ë¶„ì‚° NewSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ HTAPì„ ì§€ì›í•©ë‹ˆë‹¤.">
    <meta name="twitter:image" content="https://kaitrust.ai/images/og-glossary.png">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "DefinedTerm",
        "name": "TiDB",
        "alternateName": "MySQL Compatible NewSQL Database",
        "description": "TiDBëŠ” MySQL í˜¸í™˜ ë¶„ì‚° NewSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ HTAPì„ ì§€ì›í•©ë‹ˆë‹¤.",
        "inDefinedTermSet": {
            "@type": "DefinedTermSet",
            "name": "KAITRUST AI ë°±ê³¼ì‚¬ì „",
            "url": "https://glossary.kaitrust.ai/"
        }
    }
    </script>

    <link rel="icon" type="image/png" href="https://kaitrust.ai/favicon.png">
    <link rel="apple-touch-icon" href="https://kaitrust.ai/favicon.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Common CSS -->
    <link rel="stylesheet" href="/css/kaitrust-common.css">
    <link rel="stylesheet" href="/css/light-mode.css">
    <link rel="stylesheet" href="/components/ask-ai/kaitrust-ai-modal.css">

    <style>
        /* ê³ ë„í™” ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .term-section {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(168, 85, 247, 0.1);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
        }
        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #f1f5f9;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
        }
        .section-content p {
            color: #cbd5e1;
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        .section-content p:last-child { margin-bottom: 0; }

        /* ì½”ë“œ ë¸”ë¡ */
        .code-tabs { display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap; }
        .code-tab {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.2s;
        }
        .code-tab.active {
            background: rgba(168, 85, 247, 0.2);
            border-color: #a855f7;
            color: #a855f7;
        }
        .code-block {
            position: relative;
            background: #0f172a;
            border-radius: 12px;
            overflow: hidden;
            display: none;
        }
        .code-block.active { display: block; }
        .code-block pre { padding: 1.5rem; margin: 0; overflow-x: auto; }
        .code-block code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: #e2e8f0;
            line-height: 1.6;
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.3);
            border: none;
            border-radius: 6px;
            color: #e2e8f0;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .copy-btn:hover { background: rgba(168, 85, 247, 0.5); }

        /* ëŒ€í™” ì˜ˆì‹œ */
        .conversation-examples { display: flex; flex-direction: column; gap: 1.5rem; }
        .conv-item { background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 1.25rem; }
        .conv-context { font-size: 0.9rem; color: #a855f7; font-weight: 500; margin-bottom: 0.75rem; }
        .conv-quote {
            color: #e2e8f0;
            font-style: italic;
            line-height: 1.7;
            margin: 0;
            padding-left: 1rem;
            border-left: 3px solid #a855f7;
        }

        /* ì£¼ì˜ì‚¬í•­ */
        .warning-list { display: flex; flex-direction: column; gap: 1rem; }
        .warning-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        .warning-icon { font-size: 1.5rem; }
        .warning-item strong { color: #f1f5f9; display: block; margin-bottom: 0.25rem; }
        .warning-item p { color: #94a3b8; margin: 0; font-size: 0.95rem; }

        /* ê´€ë ¨ ìš©ì–´ */
        .related-terms { display: flex; flex-wrap: wrap; gap: 0.75rem; }
        .related-term-link {
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 20px;
            color: #a855f7;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .related-term-link:hover { background: rgba(168, 85, 247, 0.2); transform: translateY(-2px); }

        /* ë” ë°°ìš°ê¸° */
        .learn-more { display: flex; flex-direction: column; gap: 0.75rem; }
        .learn-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            color: #00f5ff;
            text-decoration: none;
            transition: all 0.2s;
        }
        .learn-link:hover { background: rgba(0, 0, 0, 0.3); transform: translateX(5px); }

        .term-detail-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 120px 2rem 4rem;
            position: relative;
            z-index: 1;
        }
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        .breadcrumb a { color: #64748b; text-decoration: none; transition: color 0.2s; }
        .breadcrumb a:hover { color: var(--primary); }
        .breadcrumb span { color: #64748b; }
        .breadcrumb .current { color: var(--accent); font-weight: 500; }
        .term-detail-header {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.6));
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        .term-category-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(168, 85, 247, 0.2);
            border-radius: 20px;
            font-size: 0.85rem;
            color: #a855f7;
            margin-bottom: 1rem;
        }
        .term-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #ffffff, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .term-english { font-size: 1.2rem; color: #94a3b8; margin-bottom: 1.5rem; }
        .term-description { font-size: 1.1rem; line-height: 1.8; color: #e2e8f0; }
        .term-actions { display: flex; gap: 1rem; margin-top: 2rem; flex-wrap: wrap; }
        .term-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9rem;
            text-decoration: none;
            transition: all 0.3s;
        }
        .btn-primary { background: linear-gradient(135deg, #a855f7, #6366f1); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(168, 85, 247, 0.3); }
        .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #e2e8f0; border: 1px solid rgba(255, 255, 255, 0.2); }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
        @media (max-width: 768px) {
            .term-detail-container { padding: 100px 1rem 2rem; }
            .term-detail-header { padding: 2rem 1.5rem; }
            .term-title { font-size: 1.8rem; }
        }
    </style>
    <link rel="stylesheet" href="/glossary/css/term-sections.css">

</head>
<body>
    <!-- Particle Background -->
    <div class="particle-container" id="particles"></div>

    <!-- Header -->
        <div id="kaitrust-header"></div>

    <main class="term-detail-container">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="https://kaitrust.ai">í™ˆ</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai">AI ë°±ê³¼ì‚¬ì „</a>
            <span>â€º</span>
            <a href="https://glossary.kaitrust.ai/#db">ë°ì´í„°ë² ì´ìŠ¤</a>
            <span>â€º</span>
            <span class="current">TiDB</span>
        </nav>

        <!-- Term Header -->
        <article class="term-detail-header">
            <div class="term-category-badge">
                <span>ğŸ—„ï¸</span>
                <span>ë°ì´í„°ë² ì´ìŠ¤</span>
            </div>
            <h1 class="term-title">TiDB</h1>
            <p class="term-english">MySQL Compatible Distributed NewSQL Database</p>
            <div class="term-description">
                <p>MySQL í˜¸í™˜ ë¶„ì‚° NewSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. HTAP(Hybrid Transactional/Analytical Processing)ì„ ì§€ì›í•˜ì—¬ í•˜ë‚˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ OLTPì™€ OLAP ì›Œí¬ë¡œë“œë¥¼ ë™ì‹œì— ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="term-actions">
                <a href="https://glossary.kaitrust.ai" class="term-action-btn btn-primary">
                    ğŸ“š ì „ì²´ ìš©ì–´ ë³´ê¸°
                </a>
                <a href="https://glossary.kaitrust.ai/#db" class="term-action-btn btn-secondary">
                    ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë”ë³´ê¸°
                </a>
            </div>
        </article>

        <!-- ìƒì„¸ ì„¤ëª… -->
        <section class="term-section">
            <h2 class="section-title">ğŸ“– ìƒì„¸ ì„¤ëª…</h2>
            <div class="section-content">
                <p><strong>TiDB</strong>ëŠ” PingCAPì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ ë¶„ì‚° SQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. Googleì˜ Spannerì™€ F1 ë…¼ë¬¸ì—ì„œ ì˜ê°ì„ ë°›ì•„ ì„¤ê³„ë˜ì—ˆìœ¼ë©°, MySQL í”„ë¡œí† ì½œì„ ì™„ë²½íˆ ì§€ì›í•˜ì—¬ ê¸°ì¡´ MySQL ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê·¸ëŒ€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p><strong>HTAP (Hybrid Transactional/Analytical Processing)</strong>: TiDBì˜ í•µì‹¬ ì°¨ë³„ì ì…ë‹ˆë‹¤. TiKV(í–‰ ì €ì¥ì†Œ)ë¡œ OLTP ì²˜ë¦¬, TiFlash(ì»¬ëŸ¼ ì €ì¥ì†Œ)ë¡œ OLAP ì²˜ë¦¬ë¥¼ ë™ì‹œì— ìˆ˜í–‰í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë¶„ì„ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì—ì„œ ë³„ë„ì˜ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ì—†ì´ ì¦‰ì‹œ ë¶„ì„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p><strong>ìˆ˜í‰ í™•ì¥(Horizontal Scaling)</strong>: ë…¸ë“œë¥¼ ì¶”ê°€í•˜ë©´ ìë™ìœ¼ë¡œ ë°ì´í„°ê°€ ë¶„ì‚°ë˜ê³  ì²˜ë¦¬ëŸ‰ì´ ì¦ê°€í•©ë‹ˆë‹¤. ìˆ˜ TBì—ì„œ ìˆ˜ë°± TBê¹Œì§€ í™•ì¥ ê°€ëŠ¥í•˜ë©°, ì“°ê¸°/ì½ê¸° ëª¨ë‘ ì„ í˜•ì ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤.</p>
                <p><strong>ê°•ë ¥í•œ ì¼ê´€ì„±</strong>: Raft í•©ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ ë¶„ì‚° í™˜ê²½ì—ì„œë„ ê°•ë ¥í•œ ì¼ê´€ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ Snapshot Isolationì„ ì œê³µí•˜ë©°, Pessimistic/Optimistic íŠ¸ëœì­ì…˜ ëª¨ë“œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p><strong>í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ</strong>: Kubernetes ìœ„ì—ì„œ TiDB Operatorë¥¼ í†µí•´ ìë™í™”ëœ ë°°í¬, ìŠ¤ì¼€ì¼ë§, ë°±ì—…/ë³µêµ¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. TiDB Cloudë¥¼ í†µí•´ ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë„ ì œê³µë©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- ì½”ë“œ ì˜ˆì œ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ’» ì½”ë“œ ì˜ˆì œ</h2>
            <div class="code-tabs">
                <button class="code-tab active" data-lang="sql">SQL ì¿¼ë¦¬</button>
                <button class="code-tab" data-lang="python">Python (mysql-connector)</button>
                <button class="code-tab" data-lang="cli">CLI / ìš´ì˜</button>
            </div>
            <div class="code-block active" data-lang="sql">
                <pre><code class="language-sql">-- TiDB SQL ì˜ˆì œ (MySQL í˜¸í™˜)

-- ============================================
-- ê¸°ë³¸ í…Œì´ë¸” ìƒì„± (MySQLê³¼ ë™ì¼)
-- ============================================

CREATE DATABASE ecommerce;
USE ecommerce;

-- ì‚¬ìš©ì í…Œì´ë¸”
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    -- ìƒ¤ë”© íŒíŠ¸ (ì„ íƒì )
    INDEX idx_email (email)
) ENGINE=InnoDB;

-- ì£¼ë¬¸ í…Œì´ë¸” (íŒŒí‹°ì…”ë‹ ì˜ˆì‹œ)
CREATE TABLE orders (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL,
    total_amount DECIMAL(15,2) NOT NULL,
    status ENUM('pending', 'paid', 'shipped', 'delivered') DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user_id (user_id),
    INDEX idx_created_at (created_at)
) ENGINE=InnoDB
-- TiDBì—ì„œ Range íŒŒí‹°ì…”ë‹ (ëŒ€ìš©ëŸ‰ í…Œì´ë¸” ìµœì í™”)
PARTITION BY RANGE (YEAR(created_at)) (
    PARTITION p2022 VALUES LESS THAN (2023),
    PARTITION p2023 VALUES LESS THAN (2024),
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION pmax VALUES LESS THAN MAXVALUE
);


-- ============================================
-- HTAP: TiFlash ì»¬ëŸ¼ ì €ì¥ì†Œ ì„¤ì •
-- ============================================

-- TiFlash ë ˆí”Œë¦¬ì¹´ ì¶”ê°€ (ì‹¤ì‹œê°„ ë¶„ì„ìš©)
ALTER TABLE orders SET TIFLASH REPLICA 1;
ALTER TABLE users SET TIFLASH REPLICA 1;

-- TiFlash ë™ê¸°í™” ìƒíƒœ í™•ì¸
SELECT * FROM information_schema.tiflash_replica;


-- ============================================
-- HTAP ì¿¼ë¦¬ ì˜ˆì‹œ
-- ============================================

-- OLTP: ë‹¨ìˆœ ì¡°íšŒ (TiKV ìë™ ì‚¬ìš©)
SELECT * FROM orders WHERE user_id = 12345 LIMIT 10;

-- OLAP: ë¶„ì„ ì¿¼ë¦¬ (TiFlash ìë™ ì‚¬ìš©)
SELECT
    DATE_FORMAT(created_at, '%Y-%m') AS month,
    COUNT(*) AS order_count,
    SUM(total_amount) AS total_sales,
    AVG(total_amount) AS avg_order_value
FROM orders
WHERE created_at >= '2024-01-01'
GROUP BY month
ORDER BY month;

-- ê°•ì œë¡œ TiFlash ì‚¬ìš© (íŒíŠ¸)
SELECT /*+ READ_FROM_STORAGE(TIFLASH[orders]) */
    status, COUNT(*) AS cnt
FROM orders
GROUP BY status;

-- ê°•ì œë¡œ TiKV ì‚¬ìš© (íŒíŠ¸)
SELECT /*+ READ_FROM_STORAGE(TIKV[orders]) */
    * FROM orders WHERE id = 1;


-- ============================================
-- ë¶„ì‚° íŠ¸ëœì­ì…˜
-- ============================================

-- Pessimistic íŠ¸ëœì­ì…˜ (ê¸°ë³¸ê°’, MySQLê³¼ ë™ì¼)
START TRANSACTION;

UPDATE accounts SET balance = balance - 100
WHERE id = 'acc-001';

UPDATE accounts SET balance = balance + 100
WHERE id = 'acc-002';

-- ì œì•½ì¡°ê±´ í™•ì¸
SELECT balance FROM accounts WHERE id = 'acc-001';

COMMIT;


-- ============================================
-- ìœ ìš©í•œ ì‹œìŠ¤í…œ ì¿¼ë¦¬
-- ============================================

-- í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
SELECT * FROM information_schema.cluster_info;

-- ëŠë¦° ì¿¼ë¦¬ í™•ì¸
SELECT * FROM information_schema.slow_query
ORDER BY query_time DESC LIMIT 10;

-- ë¦¬ì „ ë¶„í¬ í™•ì¸
SELECT * FROM information_schema.tikv_region_status
WHERE table_name = 'orders';

-- ì‹¤í–‰ ê³„íš (ë¶„ì‚° ì²˜ë¦¬ í™•ì¸)
EXPLAIN ANALYZE
SELECT * FROM orders WHERE user_id = 12345;</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
            <div class="code-block" data-lang="python">
                
                <pre><code class="language-python"># TiDB + Python (mysql-connector ë˜ëŠ” pymysql)
import mysql.connector
from mysql.connector import pooling
from decimal import Decimal
from contextlib import contextmanager

# ============================================
# ì—°ê²° ì„¤ì •
# ============================================

# TiDB ì—°ê²° í’€ (MySQL ë“œë¼ì´ë²„ ê·¸ëŒ€ë¡œ ì‚¬ìš©)
db_config = {
    'host': 'tidb-host.example.com',
    'port': 4000,  # TiDB ê¸°ë³¸ í¬íŠ¸
    'user': 'root',
    'password': 'your_password',
    'database': 'ecommerce',
    'pool_name': 'tidb_pool',
    'pool_size': 10,
    'autocommit': False,
}

connection_pool = mysql.connector.pooling.MySQLConnectionPool(**db_config)

@contextmanager
def get_connection():
    conn = connection_pool.get_connection()
    try:
        yield conn
    finally:
        conn.close()


# ============================================
# CRUD ì‘ì—…
# ============================================

class OrderService:
    def create_order(self, user_id: int, items: list) -> dict:
        """ì£¼ë¬¸ ìƒì„± - ë¶„ì‚° íŠ¸ëœì­ì…˜"""
        with get_connection() as conn:
            cursor = conn.cursor(dictionary=True)

            try:
                # TiDBëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Pessimistic íŠ¸ëœì­ì…˜
                total = sum(item['price'] * item['quantity'] for item in items)

                # ì£¼ë¬¸ ìƒì„±
                cursor.execute("""
                    INSERT INTO orders (user_id, total_amount, status)
                    VALUES (%s, %s, 'pending')
                """, (user_id, total))

                order_id = cursor.lastrowid

                # ì£¼ë¬¸ ì•„ì´í…œ ìƒì„±
                for item in items:
                    cursor.execute("""
                        INSERT INTO order_items (order_id, product_id, quantity, price)
                        VALUES (%s, %s, %s, %s)
                    """, (order_id, item['product_id'], item['quantity'], item['price']))

                    # ì¬ê³  ì°¨ê°
                    cursor.execute("""
                        UPDATE products
                        SET stock = stock - %s
                        WHERE id = %s AND stock >= %s
                    """, (item['quantity'], item['product_id'], item['quantity']))

                    if cursor.rowcount == 0:
                        raise ValueError(f"ì¬ê³  ë¶€ì¡±: {item['product_id']}")

                conn.commit()

                return {'order_id': order_id, 'total': total}

            except Exception as e:
                conn.rollback()
                raise e

    def get_sales_analytics(self, start_date: str, end_date: str) -> list:
        """ë§¤ì¶œ ë¶„ì„ - TiFlash OLAP ì¿¼ë¦¬"""
        with get_connection() as conn:
            cursor = conn.cursor(dictionary=True)

            # TiFlash íŒíŠ¸ë¡œ ì»¬ëŸ¼ ì €ì¥ì†Œ ê°•ì œ ì‚¬ìš©
            cursor.execute("""
                SELECT /*+ READ_FROM_STORAGE(TIFLASH[orders, order_items]) */
                    DATE_FORMAT(o.created_at, '%%Y-%%m-%%d') AS date,
                    COUNT(DISTINCT o.id) AS order_count,
                    SUM(o.total_amount) AS total_sales,
                    COUNT(oi.id) AS item_count
                FROM orders o
                JOIN order_items oi ON o.id = oi.order_id
                WHERE o.created_at BETWEEN %s AND %s
                GROUP BY date
                ORDER BY date
            """, (start_date, end_date))

            return cursor.fetchall()


# ============================================
# ì¬ì‹œë„ ë¡œì§ (ë¶„ì‚° íŠ¸ëœì­ì…˜ ì¶©ëŒ ëŒ€ë¹„)
# ============================================

import time
import random

def execute_with_retry(fn, max_retries=3):
    """íŠ¸ëœì­ì…˜ ì¶©ëŒ ì‹œ ì¬ì‹œë„"""
    for attempt in range(max_retries):
        try:
            return fn()
        except mysql.connector.Error as e:
            # TiDB íŠ¸ëœì­ì…˜ ì¶©ëŒ ì—ëŸ¬ ì½”ë“œ
            if e.errno in (9007, 8028) and attempt < max_retries - 1:
                # ì§€ìˆ˜ ë°±ì˜¤í”„ + ì§€í„°
                wait_time = (2 ** attempt) + random.uniform(0, 1)
                print(f"ì¬ì‹œë„ {attempt + 1}/{max_retries}: {wait_time:.2f}ì´ˆ ëŒ€ê¸°")
                time.sleep(wait_time)
                continue
            raise


# ============================================
# ì‚¬ìš© ì˜ˆì‹œ
# ============================================

order_service = OrderService()

# OLTP: ì£¼ë¬¸ ìƒì„±
result = execute_with_retry(
    lambda: order_service.create_order(
        user_id=12345,
        items=[
            {'product_id': 1, 'quantity': 2, 'price': Decimal('10000')},
            {'product_id': 2, 'quantity': 1, 'price': Decimal('25000')}
        ]
    )
)
print(f"ì£¼ë¬¸ ìƒì„±: {result}")

# OLAP: ì‹¤ì‹œê°„ ë¶„ì„ (TiFlash)
analytics = order_service.get_sales_analytics('2024-01-01', '2024-12-31')
print(f"ë§¤ì¶œ ë¶„ì„: {analytics}")</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
            <div class="code-block" data-lang="cli">
                
                <pre><code class="language-bash"># TiDB CLI ë° ìš´ì˜ ëª…ë ¹ì–´

# ============================================
# TiUPìœ¼ë¡œ ë¡œì»¬ ì„¤ì¹˜ (ê°œë°œ/í…ŒìŠ¤íŠ¸)
# ============================================

# TiUP ì„¤ì¹˜ (TiDB íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €)
curl --proto '=https' --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh

# í™˜ê²½ë³€ìˆ˜ ì ìš©
source ~/.bashrc

# ë¡œì»¬ í´ëŸ¬ìŠ¤í„° ì‹¤í–‰ (TiDB + TiKV + PD + TiFlash)
tiup playground --db 1 --kv 3 --pd 1 --tiflash 1

# MySQL í´ë¼ì´ì–¸íŠ¸ë¡œ ì ‘ì†
mysql -h 127.0.0.1 -P 4000 -u root


# ============================================
# í”„ë¡œë•ì…˜ í´ëŸ¬ìŠ¤í„° ë°°í¬
# ============================================

# í´ëŸ¬ìŠ¤í„° ë°°í¬ ì„¤ì • íŒŒì¼ (topology.yaml)
cat > topology.yaml << 'EOF'
global:
  user: "tidb"
  ssh_port: 22
  deploy_dir: "/tidb-deploy"
  data_dir: "/tidb-data"

server_configs:
  tidb:
    log.slow-threshold: 300

pd_servers:
  - host: 10.0.1.1
  - host: 10.0.1.2
  - host: 10.0.1.3

tidb_servers:
  - host: 10.0.1.4
  - host: 10.0.1.5

tikv_servers:
  - host: 10.0.1.6
  - host: 10.0.1.7
  - host: 10.0.1.8

tiflash_servers:
  - host: 10.0.1.9
EOF

# í´ëŸ¬ìŠ¤í„° ë°°í¬
tiup cluster deploy tidb-prod v7.5.0 ./topology.yaml --user root -p

# í´ëŸ¬ìŠ¤í„° ì‹œì‘
tiup cluster start tidb-prod

# í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
tiup cluster display tidb-prod


# ============================================
# í´ëŸ¬ìŠ¤í„° ê´€ë¦¬
# ============================================

# ë…¸ë“œ ìŠ¤ì¼€ì¼ ì•„ì›ƒ (TiKV ì¶”ê°€)
tiup cluster scale-out tidb-prod scale-out.yaml

# ë…¸ë“œ ìŠ¤ì¼€ì¼ ì¸ (TiKV ì œê±°)
tiup cluster scale-in tidb-prod --node 10.0.1.8:20160

# ì„¤ì • ë³€ê²½
tiup cluster edit-config tidb-prod

# ë¡¤ë§ ì—…ê·¸ë ˆì´ë“œ
tiup cluster upgrade tidb-prod v7.6.0


# ============================================
# ë°±ì—… ë° ë³µêµ¬ (BR ë„êµ¬)
# ============================================

# ì „ì²´ ë°±ì—… (S3)
tiup br backup full \
    --pd "10.0.1.1:2379" \
    --storage "s3://bucket/backup" \
    --s3.region "ap-northeast-2"

# ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…
tiup br backup db \
    --pd "10.0.1.1:2379" \
    --db "ecommerce" \
    --storage "s3://bucket/backup"

# ë³µêµ¬
tiup br restore full \
    --pd "10.0.1.1:2379" \
    --storage "s3://bucket/backup"


# ============================================
# ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (MySQL -> TiDB)
# ============================================

# TiDB Data Migration (DM) ì„¤ì •
tiup dmctl --master-addr 10.0.1.1:8261 \
    operate-source create ./source.yaml

# ë§ˆì´ê·¸ë ˆì´ì…˜ íƒœìŠ¤í¬ ì‹œì‘
tiup dmctl --master-addr 10.0.1.1:8261 \
    start-task ./task.yaml


# ============================================
# ëª¨ë‹ˆí„°ë§ (Grafana/Prometheus)
# ============================================

# TiDB Dashboard ì ‘ì† (ê¸°ë³¸ í¬íŠ¸)
# http://PD_IP:2379/dashboard

# Grafana ì ‘ì† (TiUPìœ¼ë¡œ ì„¤ì¹˜ ì‹œ)
# http://GRAFANA_IP:3000

# ëŠë¦° ì¿¼ë¦¬ ë¡œê·¸ í™•ì¸
tiup ctl:v7.5.0 pd -u http://10.0.1.1:2379 log slow-query</code></pre>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ ë³µì‚¬</button>
            </div>
        </section>

        <!-- ì‹¤ë¬´ ëŒ€í™” ì˜ˆì‹œ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ—£ï¸ ì‹¤ë¬´ì—ì„œ ì´ë ‡ê²Œ ë§í•˜ì„¸ìš”</h2>
            <div class="conversation-examples">
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ ê¸°ìˆ  ê²€í†  íšŒì˜ì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ ë•Œë¬¸ì— MySQLì—ì„œ ë¶„ì„ ì¿¼ë¦¬ ëŒë¦¬ë©´ ì„œë¹„ìŠ¤ ì˜í–¥ ìˆì–ì•„ìš”. TiDBë¡œ ê°€ë©´ TiFlashê°€ ë¶„ì„ ì¿¼ë¦¬ ì²˜ë¦¬í•´ì„œ ìš´ì˜ DB ë¶€í•˜ ì—†ì´ ì‹¤ì‹œê°„ ë¶„ì„ ê°€ëŠ¥í•´ìš”. ETL íŒŒì´í”„ë¼ì¸ ì—†ì´ìš”."
                    </blockquote>
                </div>
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íšì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "TiDBëŠ” MySQL í”„ë¡œí† ì½œ ì™„ë²½ í˜¸í™˜ì´ë¼ ë“œë¼ì´ë²„ ë³€ê²½ ì—†ì´ ì—°ê²° ë¬¸ìì—´ë§Œ ë°”ê¾¸ë©´ ë¼ìš”. DM ë„êµ¬ë¡œ MySQL ì‹¤ì‹œê°„ ë™ê¸°í™”í•˜ë©´ì„œ ì ì§„ì ìœ¼ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆê³ ìš”. ë‹¤ë§Œ ì¼ë¶€ MySQL ì „ìš© í•¨ìˆ˜ëŠ” ì²´í¬í•´ë´ì•¼ í•´ìš”."
                    </blockquote>
                </div>
                <div class="conv-item">
                    <div class="conv-context">ğŸ’¬ ì„±ëŠ¥ íŠœë‹ ë…¼ì˜ì—ì„œ</div>
                    <blockquote class="conv-quote">
                        "ì´ ë¶„ì„ ì¿¼ë¦¬ê°€ TiKVë¡œ ê°€ì„œ ëŠë¦° ê²ƒ ê°™ì•„ìš”. TiFlash ë ˆí”Œë¦¬ì¹´ ì„¤ì •í–ˆëŠ”ì§€ í™•ì¸í•˜ê³ , íŒíŠ¸ë¡œ ê°•ì œ ì§€ì •í•´ë³´ì„¸ìš”. information_schema.tiflash_replicaì—ì„œ ë™ê¸°í™” ìƒíƒœë„ ì²´í¬í•´ë³´ì‹œê³ ìš”."
                    </blockquote>
                </div>
            </div>
        </section>

        <!-- ì£¼ì˜ì‚¬í•­ -->
        <section class="term-section">
            <h2 class="section-title">âš ï¸ ì£¼ì˜ì‚¬í•­ & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</h2>
            <div class="warning-list">
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>AUTO_INCREMENT í•«ìŠ¤íŒŸ</strong>
                        <p>AUTO_INCREMENTëŠ” ìˆœì°¨ì ì´ë¼ í•«ìŠ¤íŒŸ ë°œìƒ ê°€ëŠ¥. AUTO_RANDOM ë˜ëŠ” SHARD_ROW_ID_BITS ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>TiFlash ë™ê¸°í™” ì§€ì—°</strong>
                        <p>TiFlashëŠ” ë¹„ë™ê¸° ë³µì œë¼ ìµœì‹  ë°ì´í„°ê°€ ì§€ì—°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì‹œê°„ì„±ì´ ì¤‘ìš”í•˜ë©´ TiKV íŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âŒ</span>
                    <div>
                        <strong>MySQL ë¹„í˜¸í™˜ ê¸°ëŠ¥</strong>
                        <p>ì €ì¥ í”„ë¡œì‹œì €, íŠ¸ë¦¬ê±°, ì¼ë¶€ í•¨ìˆ˜ëŠ” ì œí•œì ì…ë‹ˆë‹¤. ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ í˜¸í™˜ì„± ì²´í¬ ë„êµ¬ë¡œ ê²€ì¦í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="warning-item">
                    <span class="warning-icon">âœ…</span>
                    <div>
                        <strong>TiDB ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤</strong>
                        <p>ëŒ€ìš©ëŸ‰ í…Œì´ë¸”ì— TiFlash ë ˆí”Œë¦¬ì¹´, AUTO_RANDOMìœ¼ë¡œ í•«ìŠ¤íŒŸ ë°©ì§€, ì •ê¸°ì  ANALYZE, PD 3ë…¸ë“œ ì´ìƒ êµ¬ì„±.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ê´€ë ¨ ìš©ì–´ -->
        <section class="term-section">
            <h2 class="section-title">ğŸ”— ê´€ë ¨ ìš©ì–´</h2>
            <div class="related-terms">
                <a href="/ko/term/MySQL/" class="related-term-link">MySQL</a>
                <a href="/ko/term/HTAP/" class="related-term-link">HTAP</a>
                <a href="/ko/term/CockroachDB/" class="related-term-link">CockroachDB</a>
                <a href="/ko/term/%EC%83%A4%EB%94%A9/" class="related-term-link">ìƒ¤ë”©</a>
                <a href="/ko/term/Raft/" class="related-term-link">Raft</a>
                <a href="/ko/term/OLAP/" class="related-term-link">OLAP</a>
            </div>
        </section>

        <!-- ë” ë°°ìš°ê¸° -->
        <section class="term-section">
            <h2 class="section-title">ğŸ“š ë” ë°°ìš°ê¸°</h2>
            <div class="learn-more">
                <a href="https://docs.pingcap.com/tidb/stable" target="_blank" class="learn-link">
                    ğŸ“„ TiDB ê³µì‹ ë¬¸ì„œ
                </a>
                <a href="https://docs.pingcap.com/tidb/stable/tidb-architecture" target="_blank" class="learn-link">
                    ğŸ“ TiDB ì•„í‚¤í…ì²˜ ê°€ì´ë“œ
                </a>
                <a href="https://en.pingcap.com/education/" target="_blank" class="learn-link">
                    ğŸ“– PingCAP Education - ë¬´ë£Œ í•™ìŠµ ì½”ìŠ¤
                </a>
            </div>
        </section>
    </main>

    <!-- Engagement Kit -->
    <div id="kaitrust-engagement-kit"></div>
    <link rel="stylesheet" href="/components/engagement-kit/engagement-kit.css?v=20260130015843">
    <script src="/components/engagement-kit/engagement-kit.js?v=20260130020328"></script>

    <!-- Footer -->
        <div id="kaitrust-footer"></div>

    <!-- Scripts -->
    <script>document.getElementById('currentYear').textContent = new Date().getFullYear();</script>
    <script>
    function copyCode(btn) {
        const codeBlock = btn.parentElement.querySelector('code');
        navigator.clipboard.writeText(codeBlock.textContent).then(() => {
            btn.textContent = 'âœ… ë³µì‚¬ë¨!';
            setTimeout(() => btn.textContent = 'ğŸ“‹ ë³µì‚¬', 2000);
        });
    }

    document.querySelectorAll('.code-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const lang = this.dataset.lang;
            const section = this.closest('.term-section');
            section.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            section.querySelectorAll('.code-block').forEach(block => {
                block.classList.remove('active');
                if (block.dataset.lang === lang) block.classList.add('active');
            });
        });
    });
    </script>
    <script>window.WIA_A11Y_CONFIG = { fabBottom: "78px", fabRight: "170px" };</script>
    <script src="https://wia.live/wia-a11y-toolkit/wia-a11y-toolkit.min.js"></script>
    <script src="/components/ask-ai/kaitrust-ai-modal.js"></script>
    <script src="/components/language-modal/wia-language-modal-211.js"></script>
<script src="/glossary/js/term-sections.js"></script>
    <script src="https://kaitrust.ai/components/site-kit/kaitrust-site-kit.js?v=20260130012"></script>
    <script src="/kaitrust-i18n.js?v=20260130012"></script>
</body>
</html>
